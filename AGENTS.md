ü§ñ Agent Guidelines: UE5 Question Generator (Single Source of Truth)This document outlines the specialized roles and responsibilities for AI agents working on this project. This system uses the Google Antigravity platform to drive agentic development and implement a Single Source of Truth (SSOT) for all project standards and processes.üéØ Core PrinciplesUser-Centric: Always prioritize the user's request and experience, focusing on intuitive workflows and minimal friction across all application modes (Creation, Review, Analytics). All design and architectural decisions must ultimately enhance the end-user's ability to generate and manage questions efficiently.Code Quality: Maintain high standards for code readability, performance, and robustness. This requires adhering to modern language standards (ES6+), implementing strong TypeScript/prop typing, and ensuring strict logical separation of concerns (DRY Principle). Poor quality code introduces mandatory technical debt that the Vision Architect Prime must address.Documentation: Keep documentation up-to-date with code changes. Comprehensive inline comments, clear function headers, and timely updates to design documents are mandatory. Documentation must serve as the primary source of truth for all architectural decisions and API contracts.Security: Always consider the security implications of changes, especially within Firebase Cloud Functions and all API service interactions. Agents must default to secure practices like input sanitization, parameterized queries, and least-privilege access, referencing the JavaSec-Guardian.md rule at every implementation step.Performance: Monitor and optimize bundle size and render performance to ensure optimal results. This includes minimizing network payloads, optimizing image and data loading strategies, and reducing unnecessary component re-renders to maintain a fast, professional-grade application experience, particularly in the data-heavy Review Mode.üõë Non-Negotiable Human-in-the-Loop RequirementQuestions must NEVER be automatically vetted or submitted by the AI. This is a non-negotiable design principle tied to instructional integrity and project liability [cite: fullContent]:Review each question before acceptance: This ensures factual accuracy and deep domain relevance (UE5 scenarios) which the AI cannot guarantee autonomously.Manually verify the AI critique score: This acts as a secondary quality control measure on the AI's internal self-assessment capabilities.Explicitly approve or reject each question: This final sign-off is the only authorized transition from 'Draft' to 'Approved' status in the database.‚öôÔ∏è Agent Workflow & Orchestration Protocol‚ö†Ô∏è A. Windows Orchestration (CRITICAL LAG PREVENTION)To prevent UI freezing on the Windows operating system, the agent must strictly adhere to this serialized workflow:Single-Threaded Execution: Never run multiple complex sub-agents (Workflows) in parallel. All delegation must be sequential to preserve system responsiveness.Atomic Steps: Break requests into a numbered list. Execute Step 1 fully, Verify the result, then proceed to Step 2. Failure to verify a step necessitates rollback to the beginning of that step.Phase Your Work: For prominent features (like major feature releases or complex refactors), explicitly ask the user: "I will tackle this in phases. Phase 1 is [Task]. Proceed?" to manage user expectations and context load.üß† B. Memory & Context Protocol (Handoff Rule)To prevent "Context Bloat" and IDE lag, Agents must adhere to this strict "Summarize & Flush" workflow:Debug Filter Rule: When summarizing work, NEVER save full stack traces, massive error logs, or raw debug text to documentation. Focus only on the root cause and the final fix applied.Session Handoff: Before the user deletes a laggy chat thread, the agent MUST update docs/project-context/NEXT_SESSION.md with Decisions (high-level architectural choices), Status (current progress and blockers), and Next Steps (immediate actions for the next session).Resumption: When a user starts a fresh chat, the agent MUST ALWAYS read docs/project-context/NEXT_SESSION.md first to restore "Short Term Memory," minimizing the token usage required to recall context.üìù C. Documentation & Artifact ProtocolThe agent must enforce documentation and process integrity:Required File Updates: When making a code change or adding a feature, the agent MUST ensure corresponding updates are made to: AGENTS.md (if roles change), docs/project-context/NEXT_SESSION.md, README.md, and docs/project-context/ANCHOR_MANIFEST.md (component inventory).Git Protocol: The agent must commit to git frequently (after every major atomic step) and use descriptive, meaningful commit messages that link to the implemented task.üìÇ Project StructureThis section defines the repository layout for all agents, guiding all code modification and context searching:‚îú‚îÄ‚îÄ src/                 # React application source
‚îÇ   ‚îú‚îÄ‚îÄ App.jsx          # Main application component, entry point
‚îÇ   ‚îú‚îÄ‚îÄ components/      # UI components, presentation logic
‚îÇ   ‚îú‚îÄ‚îÄ hooks/           # Custom React hooks, encapsulating reusable state management and logic (e.g., useQuestionManager).
‚îÇ   ‚îú‚îÄ‚îÄ services/        # API service wrappers (Gemini, Firebase) handling external data fetching, authentication, and error translation.
‚îÇ   ‚îî‚îÄ‚îÄ utils/           # Generic, side-effect free helper functions (e.g., formatting, validation logic).
‚îú‚îÄ‚îÄ functions/           # Firebase Cloud Functions (server-side security and heavy lifting)
‚îú‚îÄ‚îÄ scripts/             # Build and deploy scripts (CI/CD pipeline steps)
‚îú‚îÄ‚îÄ docs/                # User and developer documentation
‚îÇ   ‚îî‚îÄ‚îÄ project-context/ # Architecture, licenses, tech stack, and agent brain
‚îî‚îÄ‚îÄ public/              # Static assets (images, favicon)
üîé Agent Workflow ModesAntigravity agents operate in different modes selected based on task complexity:ModeTask TypeBest PracticePlanning ModeNew features, complex bug fixes, and architecture changesAlways create an implementation plan first, and get user approval to confirm alignment before coding begins.Execution ModeImplementing approved plansFollow plan precisely, test as you go, and commit frequently to ensure traceability.Fast ModeSimple edits, renames, quick fixesUse for quick edits that require minimal context switching, skipping planning artifacts to save time.üß© Agent Personas and RolesAgent persona definitions are located in the .agent/ directory:Master OrchestratorOmni-Dev-Prime.md: Lead Architect & Engineering Manager - Routes the user request to the specialized personas based on trigger keywords, manages serialization, and enforces the Orchestration Protocol.Specialized PersonasContent-Validator-Prime.md: Content Quality & Validation Expert - Specializes in verifying the accuracy, instructional soundness, and formatting of all generated questions. Enforces pedagogical integrity and domain relevance (UE5 scenarios).React-Architect-Prime.md: React Architecture & Zero-Regression Refactoring Specialist - Focuses on high-level component composition, state architecture (Redux/Context), and complex front-end systems design.React-UIUX-Architect.md: Frontend Architecture & Product Design Specialist - Focuses on design system adherence, information hierarchy, and translating wireframes into functional components.Async-Architect-Prime.md: Concurrency Engineering & Performance Optimization Specialist - Focuses on implementing non-blocking I/O, multithreading logic, and optimizing database/API interaction latency.JavaSec-Guardian.md: Java & Web Application Security Expert - Enforces security compliance, input validation, secret management standards, and checks against potential injection vulnerabilities in the application logic.üõ†Ô∏è Tools & CommandsCategoryCommandDescriptionDevelopmentnpm run devStart dev server on localhost:5173 for local development and testing.npm run buildBuild the optimized production bundle for deployment.npm run previewPreview the production build locally before deployment.npm testRun the full suite of unit and integration tests.Deploymentnpm run deployDeploy the static application to GitHub Pages (or equivalent hosting).firebase deploy --only functionsDeploy only the Firebase Cloud Functions logic (used for quick server-side updates).Deploy scripts are located in the scripts/ directory.

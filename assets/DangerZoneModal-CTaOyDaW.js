import{j as e,I as a,r as g,m as E,n as N}from"./index-DCPd_T20.js";const j=({isOpen:i,title:c,message:o,confirmText:d="Confirm",cancelText:r="Cancel",onConfirm:n,onCancel:x,isDanger:l=!1})=>i?e.jsx("div",{className:"fixed inset-0 bg-black/90 z-[200] flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-700 p-6 rounded-xl shadow-2xl max-w-md w-full animate-in zoom-in-95 duration-300 space-y-4",children:[e.jsxs("h3",{className:`text-xl font-bold flex items-center gap-2 ${l?"text-red-500":"text-yellow-500"}`,children:[e.jsx(a,{name:l?"alert-triangle":"help-circle",size:24}),c]}),e.jsx("div",{className:"text-sm text-slate-300",children:o.split(`
`).map((m,t)=>e.jsx("p",{className:t>0?"mt-2":"",children:m},t))}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:x,className:"flex-1 px-4 py-2.5 text-sm rounded bg-slate-800 hover:bg-slate-700 text-slate-300 hover:text-white transition-colors font-medium",children:r}),e.jsx("button",{onClick:n,className:`flex-1 px-4 py-2.5 text-sm rounded font-bold transition-colors ${l?"bg-red-600 hover:bg-red-500 text-white":"bg-blue-600 hover:bg-blue-500 text-white"}`,children:d})]})]})}):null,y=({isOpen:i,title:c,message:o,placeholder:d="",expectedValue:r=null,confirmText:n="Confirm",cancelText:x="Cancel",onConfirm:l,onCancel:m,isDanger:t=!1})=>{const[h,u]=g.useState("");if(!i)return null;const f=()=>{if(r&&h!==r){alert(`Please type "${r}" exactly to confirm.`);return}l(h),u("")},b=()=>{u(""),m()};return e.jsx("div",{className:"fixed inset-0 bg-black/90 z-[200] flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-700 p-6 rounded-xl shadow-2xl max-w-md w-full animate-in zoom-in-95 duration-300 space-y-4",children:[e.jsxs("h3",{className:`text-xl font-bold flex items-center gap-2 ${t?"text-red-500":"text-yellow-500"}`,children:[e.jsx(a,{name:t?"alert-triangle":"help-circle",size:24}),c]}),e.jsx("p",{className:"text-sm text-slate-300 whitespace-pre-line",children:o}),e.jsx("input",{type:"text",value:h,onChange:s=>u(s.target.value),placeholder:d,className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded text-sm text-white focus:border-red-500 focus:ring-1 focus:ring-red-500 outline-none transition-all",autoFocus:!0,onKeyDown:s=>{s.key==="Enter"&&f(),s.key==="Escape"&&b()}}),r&&e.jsxs("p",{className:"text-xs text-slate-500",children:["Type ",e.jsx("span",{className:"font-bold text-red-400",children:r})," to confirm"]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{onClick:b,className:"flex-1 px-4 py-2 text-sm rounded bg-slate-800 hover:bg-slate-700 text-slate-300 hover:text-white transition-colors font-medium",children:x}),e.jsx("button",{onClick:f,className:`flex-1 px-4 py-2 text-sm rounded font-bold transition-colors ${t?"bg-red-600 hover:bg-red-500 text-white":"bg-blue-600 hover:bg-blue-500 text-white"}`,children:n})]})]})})},w=({isOpen:i,onClose:c,config:o,onClearData:d})=>{const[r,n]=g.useState(!1),[x,l]=g.useState(!1),[m,t]=g.useState(!1),h=()=>{l(!0)},u=()=>{l(!1),t(!0)},f=async b=>{if(b!=="DELETE EVERYTHING"){alert("Factory reset cancelled. You must type 'DELETE EVERYTHING' exactly."),t(!1);return}console.log("âš ï¸ FACTORY RESET INITIATED"),t(!1),n(!0);try{let s=0;console.log("Clearing Firestore...");try{s=await E(),console.log(`âœ… Deleted ${s} questions from Firestore`)}catch(p){throw console.error("âŒ Firestore deletion failed:",p),new Error(`Firestore deletion failed: ${p.message}`)}if(o.sheetUrl){console.log("Clearing Google Spreadsheet...");try{N(o.sheetUrl),console.log("âœ… Spreadsheet clear request sent (check new tab)")}catch(p){console.error("âŒ Sheets clearing failed:",p)}}console.log("Clearing localStorage..."),localStorage.clear(),console.log("âœ… Local storage cleared"),alert(`Factory Reset Complete!

â€¢ Firestore: ${s} questions deleted
â€¢ Spreadsheet: ${o.sheetUrl?"Clearing in new tab":"Skipped"}
â€¢ Local Storage: Cleared

Page will reload.`),window.location.reload()}catch(s){console.error("âŒ Factory reset error:",s),alert(`Error during factory reset:

`+s.message+`

Check console for details.`),n(!1)}};return i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-red-950/50 border-2 border-red-500 rounded-xl shadow-2xl w-full max-w-md overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"p-4 border-b border-red-900 flex justify-between items-center bg-red-900/50",children:[e.jsxs("h2",{className:"text-lg font-bold text-red-300 flex items-center gap-2",children:[e.jsx(a,{name:"alert-triangle",className:"text-red-500"})," DANGER ZONE"]}),e.jsx("button",{onClick:c,className:"text-red-400 hover:text-white transition-colors","aria-label":"Close Danger Zone",children:e.jsx(a,{name:"x"})})]}),e.jsx("div",{className:"p-6 space-y-6",children:e.jsxs("div",{className:"bg-red-900/20 p-4 rounded-lg border border-red-900/50",children:[e.jsxs("p",{className:"text-sm text-red-300 mb-4",children:["âš ï¸ ",e.jsx("strong",{children:"WARNING:"})," These operations are ",e.jsx("strong",{children:"PERMANENT"})," and cannot be undone. Your data will be lost forever."]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:d,className:"w-full px-4 py-3 bg-red-900/20 hover:bg-red-900/40 text-red-400 text-sm font-bold rounded border border-red-900/50 transition-colors flex items-center justify-center gap-2",children:[e.jsx(a,{name:"trash-2",size:16}),"Clear Local Data (Keep Cloud Backup)"]}),e.jsx("button",{onClick:h,disabled:r,className:"w-full px-4 py-3 bg-red-950 hover:bg-red-900 text-red-500 text-sm font-bold rounded border-2 border-red-900 transition-colors flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:r?e.jsxs(e.Fragment,{children:[e.jsx(a,{name:"loader",size:16,className:"animate-spin"})," Resetting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(a,{name:"bomb",size:16})," FACTORY RESET (Delete Everything)"]})})]}),e.jsx("p",{className:"text-[10px] text-red-400/70 mt-3 text-center",children:"Factory Reset deletes ALL data: Spreadsheet + Firestore + Local Storage"})]})})]})}),e.jsx(j,{isOpen:x,title:"âš ï¸ FACTORY RESET WARNING âš ï¸",message:`This will PERMANENTLY DELETE ALL data from:

â€¢ Google Spreadsheet (all Master_ sheets)
â€¢ Firestore Database (cloud)  
â€¢ Local storage (questions, settings, analytics)

This action CANNOT be undone. Are you ABSOLUTELY SURE?`,confirmText:"Yes, I Understand",cancelText:"Cancel",onConfirm:u,onCancel:()=>l(!1),isDanger:!0}),e.jsx(y,{isOpen:m,title:"ðŸ”´ FINAL CONFIRMATION ðŸ”´",message:"Type 'DELETE EVERYTHING' (all caps, no quotes) to confirm permanent deletion of ALL data:",placeholder:"Type DELETE EVERYTHING here",expectedValue:"DELETE EVERYTHING",confirmText:"Delete Everything Forever",cancelText:"Cancel",onConfirm:f,onCancel:()=>t(!1),isDanger:!0})]}):null};export{w as default};

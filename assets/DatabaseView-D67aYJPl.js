import{r as x,j as e,I as i,Q as b,c as u}from"./index-BsMNdWbn.js";const p=t=>{if(!t||t.length===0)return{total:0,byDifficulty:{Easy:0,Medium:0,Hard:0},byType:{"Multiple Choice":0,"True/False":0},byDiscipline:{},avgQuality:0};const s={total:t.length,byDifficulty:{Easy:0,Medium:0,Hard:0},byType:{"Multiple Choice":0,"True/False":0},byDiscipline:{},totalQuality:0,ratedCount:0};return t.forEach(a=>{s.byDifficulty[a.difficulty]!==void 0&&s.byDifficulty[a.difficulty]++,s.byType[a.type]!==void 0&&s.byType[a.type]++,s.byDiscipline[a.discipline]||(s.byDiscipline[a.discipline]=0),s.byDiscipline[a.discipline]++;const l=parseFloat(a.critiqueScore||a.initialQuality);isNaN(l)||(s.totalQuality+=l,s.ratedCount++)}),s.avgQuality=s.ratedCount>0?(s.totalQuality/s.ratedCount).toFixed(1):0,s},m=({questions:t})=>{const s=x.useMemo(()=>p(t),[t]);return!t||t.length===0?null:e.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-lg p-4 mb-4 animate-in fade-in slide-in-from-top-2",children:[e.jsx("h3",{className:"text-xs font-bold text-slate-500 uppercase mb-3 tracking-wider",children:"Database Metrics"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-slate-800 p-3 rounded border border-slate-700",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:s.total}),e.jsx("div",{className:"text-[10px] text-slate-400 uppercase",children:"Total Questions"})]}),e.jsxs("div",{className:"bg-slate-800 p-3 rounded border border-slate-700",children:[e.jsx("div",{className:"text-2xl font-bold text-indigo-400",children:s.avgQuality}),e.jsx("div",{className:"text-[10px] text-slate-400 uppercase",children:"Avg Quality"})]}),e.jsxs("div",{className:"bg-slate-800 p-3 rounded border border-slate-700",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-400",children:s.byType["Multiple Choice"]}),e.jsx("div",{className:"text-[10px] text-slate-400 uppercase",children:"Multiple Choice"})]}),e.jsxs("div",{className:"bg-slate-800 p-3 rounded border border-slate-700",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:s.byType["True/False"]}),e.jsx("div",{className:"text-[10px] text-slate-400 uppercase",children:"True/False"})]})]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between text-[10px] text-slate-400 mb-1 uppercase font-bold",children:e.jsx("span",{children:"Difficulty Distribution"})}),e.jsxs("div",{className:"flex h-2 rounded-full overflow-hidden bg-slate-800",children:[e.jsx("div",{className:"bg-green-500",style:{width:`${s.byDifficulty.Easy/s.total*100}%`},title:`Easy: ${s.byDifficulty.Easy}`}),e.jsx("div",{className:"bg-yellow-500",style:{width:`${s.byDifficulty.Medium/s.total*100}%`},title:`Medium: ${s.byDifficulty.Medium}`}),e.jsx("div",{className:"bg-red-500",style:{width:`${s.byDifficulty.Hard/s.total*100}%`},title:`Hard: ${s.byDifficulty.Hard}`})]}),e.jsxs("div",{className:"flex justify-between text-[10px] text-slate-500 mt-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"})," Easy"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500"})," Medium"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"})," Hard"]})]})]})})]})},h=({questions:t,sheetUrl:s,onLoad:a,onClearView:l,onHardReset:d,isProcessing:r})=>{const n=()=>{window.confirm("ARE YOU SURE? This will permanently DELETE ALL questions from the Cloud Database (Master_DB). This cannot be undone.")&&(u(s),d())};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center bg-blue-900/20 p-4 rounded border border-blue-800/50",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-bold text-blue-400 flex items-center gap-2",children:[e.jsx(i,{name:"database"})," Database View"]}),e.jsxs("p",{className:"text-xs text-blue-300/70",children:["Viewing ",t.length," approved questions from Google Sheets (Read Only)"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:n,className:"px-3 py-1 bg-red-600 hover:bg-red-500 text-white text-xs rounded border border-red-500 flex items-center gap-2 font-bold shadow-sm shadow-red-900/50",children:[e.jsx(i,{name:"alert-triangle",size:12})," HARD RESET"]}),e.jsxs("button",{onClick:l,className:"px-3 py-1 bg-red-900/50 hover:bg-red-800 text-red-200 text-xs rounded border border-red-800 flex items-center gap-2",children:[e.jsx(i,{name:"trash-2",size:12})," Clear View"]}),e.jsxs("button",{onClick:a,disabled:r,className:"px-3 py-1 bg-blue-800 hover:bg-blue-700 text-blue-200 text-xs rounded border border-blue-600 flex items-center gap-2",children:[e.jsx(i,{name:"refresh-cw",size:12,className:r?"animate-spin":""})," Refresh"]})]})]}),e.jsx(m,{questions:t}),t.length===0?e.jsx("div",{className:"text-center py-10 text-slate-500",children:"No questions loaded from database. Click Refresh."}):t.map((c,o)=>e.jsx("div",{className:"opacity-75 hover:opacity-100 transition-opacity",children:e.jsx(b,{q:c,onUpdateStatus:()=>{},onExplain:()=>{},onVariate:()=>{},onCritique:()=>{},onTranslateSingle:()=>{},onSwitchLanguage:()=>{},onDelete:()=>{},availableLanguages:new Set,isProcessing:!1})},o))]})};export{h as default};

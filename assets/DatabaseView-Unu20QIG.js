import{r as s,b as Ie,C as Ce,j as n,c as ke,I as oe,Q as Le}from"./index-ByeKXsca.js";import{r as K,c as ce,a as Te,S as $e,b as _e,u as de,s as Re,d as Me,e as ze,f as Be,g as Fe,h as Ke,i as We,j as ue,k as Qe,l as q,m as Ve,n as U,o as pe,p as fe,q as he,t as He,v as Ge,w as Ue,x as ee,y as Ye,D as Xe,z as me,R as Ze,A as Je,B as qe,C as ve,E as et,F as tt,G as at,H as rt,I as nt,J as it,Z as lt,L as st,K as ot,M as ct,N as dt,O as ye,P as te,Q as ae,T as ut,U as pt,V as _,W as ft,X as ht,Y as mt,_ as vt,$ as yt,a0 as gt,a1 as xt,a2 as bt,a3 as z,a4 as jt,a5 as Pt,a6 as re,a7 as B,a8 as wt,a9 as Q,aa as V,ab as H,ac as Et,ad as St,ae as Nt}from"./AreaChart-DEiz7_vL.js";function F(){return F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},F.apply(null,arguments)}function ne(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function Dt(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?ne(Object(a),!0).forEach(function(r){Ot(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ne(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Ot(e,t,a){return(t=At(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function At(e){var t=It(e,"string");return typeof t=="symbol"?t:t+""}function It(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var N=32,Ct={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function kt(e){var{data:t,iconType:a,inactiveColor:r}=e,i=N/2,l=N/6,o=N/3,d=t.inactive?r:t.color,c=a??t.type;if(c==="none")return null;if(c==="plainline"){var u;return s.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:(u=t.payload)===null||u===void 0?void 0:u.strokeDasharray,x1:0,y1:i,x2:N,y2:i,className:"recharts-legend-icon"})}if(c==="line")return s.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(i,"h").concat(o,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(2*o,",").concat(i,`
            H`).concat(N,"M").concat(2*o,",").concat(i,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(o,",").concat(i),className:"recharts-legend-icon"});if(c==="rect")return s.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(N/8,"h").concat(N,"v").concat(N*3/4,"h").concat(-N,"z"),className:"recharts-legend-icon"});if(s.isValidElement(t.legendIcon)){var p=Dt({},t);return delete p.legendIcon,s.cloneElement(t.legendIcon,p)}return s.createElement(_e,{fill:d,cx:i,cy:i,size:N,sizeType:"diameter",type:c})}function Lt(e){var{payload:t,iconSize:a,layout:r,formatter:i,inactiveColor:l,iconType:o}=e,d={x:0,y:0,width:N,height:N},c={display:r==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((p,f)=>{var v=p.formatter||i,b=ce({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:p.inactive});if(p.type==="none")return null;var g=p.inactive?l:p.color,x=v?v(p.value,p,f):p.value;return s.createElement("li",F({className:b,style:c,key:"legend-item-".concat(f)},Te(e,p,f)),s.createElement($e,{width:a,height:a,viewBox:d,style:u,"aria-label":"".concat(x," legend icon")},s.createElement(kt,{data:p,iconType:o,inactiveColor:l})),s.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},x))})}var Tt=e=>{var t=K(e,Ct),{payload:a,layout:r,align:i}=t;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:r==="horizontal"?i:"left"};return s.createElement("ul",{className:"recharts-default-legend",style:l},s.createElement(Lt,F({},t,{payload:a})))};function $t(){return de(Re)}var _t=["contextPayload"];function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},G.apply(null,arguments)}function ie(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function L(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?ie(Object(a),!0).forEach(function(r){Rt(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ie(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Rt(e,t,a){return(t=Mt(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Mt(e){var t=zt(e,"string");return typeof t=="symbol"?t:t+""}function zt(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bt(e,t){if(e==null)return{};var a,r,i=Ft(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Ft(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}function Kt(e){return e.value}function Wt(e){var{contextPayload:t}=e,a=Bt(e,_t),r=Ve(t,e.payloadUniqBy,Kt),i=L(L({},a),{},{payload:r});return s.isValidElement(e.content)?s.cloneElement(e.content,i):typeof e.content=="function"?s.createElement(e.content,i):s.createElement(Tt,i)}function Qt(e,t,a,r,i,l){var{layout:o,align:d,verticalAlign:c}=t,u,p;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(d==="center"&&o==="vertical"?u={left:((r||0)-l.width)/2}:u=d==="right"?{right:a&&a.right||0}:{left:a&&a.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?p={top:((i||0)-l.height)/2}:p=c==="bottom"?{bottom:a&&a.bottom||0}:{top:a&&a.top||0}),L(L({},u),p)}function Vt(e){var t=ue();return s.useEffect(()=>{t(Qe(e))},[t,e]),null}function Ht(e){var t=ue();return s.useEffect(()=>(t(q(e)),()=>{t(q({width:0,height:0}))}),[t,e]),null}function Gt(e,t,a,r){return e==="vertical"&&We(t)?{height:t}:e==="horizontal"?{width:a||r}:null}var Ut={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function ge(e){var t=K(e,Ut),a=$t(),r=Me(),i=ze(),{width:l,height:o,wrapperStyle:d,portal:c}=t,[u,p]=Be([a]),f=Fe(),v=Ke();if(f==null||v==null)return null;var b=f-(i?.left||0)-(i?.right||0),g=Gt(t.layout,o,l,b),x=c?d:L(L({position:"absolute",width:g?.width||l||"auto",height:g?.height||o||"auto"},Qt(d,t,i,f,v,u)),d),D=c??r;if(D==null||a==null)return null;var S=s.createElement("div",{className:"recharts-legend-wrapper",style:x,ref:p},s.createElement(Vt,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!c&&s.createElement(Ht,{width:u.width,height:u.height}),s.createElement(Wt,G({},t,g,{margin:i,chartWidth:f,chartHeight:v,contextPayload:a})));return Ie.createPortal(S,D)}ge.displayName="Legend";var xe=(e,t,a,r)=>fe(e,"xAxis",t,r),be=(e,t,a,r)=>he(e,"xAxis",t,r),je=(e,t,a,r)=>fe(e,"yAxis",a,r),Pe=(e,t,a,r)=>he(e,"yAxis",a,r),Yt=U([pe,xe,je,be,Pe],(e,t,a,r,i)=>Ue(e,"xAxis")?ee(t,r,!1):ee(a,i,!1)),Xt=(e,t,a,r,i)=>i;function Zt(e){return e.type==="line"}var Jt=U([Ge,Xt],(e,t)=>e.filter(Zt).find(a=>a.id===t)),qt=U([pe,xe,je,be,Pe,Jt,Yt,He],(e,t,a,r,i,l,o,d)=>{var{chartData:c,dataStartIndex:u,dataEndIndex:p}=d;if(!(l==null||t==null||a==null||r==null||i==null||r.length===0||i.length===0||o==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:f,data:v}=l,b;if(v!=null&&v.length>0?b=v:b=c?.slice(u,p+1),b!=null)return xa({layout:e,xAxis:t,yAxis:a,xAxisTicks:r,yAxisTicks:i,dataKey:f,bandSize:o,displayedData:b})}}),ea=["id"],ta=["type","layout","connectNulls","needClip","shape"],aa=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function R(){return R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},R.apply(null,arguments)}function le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?le(Object(a),!0).forEach(function(r){ra(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):le(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function ra(e,t,a){return(t=na(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function na(e){var t=ia(e,"string");return typeof t=="symbol"?t:t+""}function ia(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Y(e,t){if(e==null)return{};var a,r,i=la(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function la(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var sa=e=>{var{dataKey:t,name:a,stroke:r,legendType:i,hide:l}=e;return[{inactive:l,dataKey:t,type:i,color:r,value:ve(a,t),payload:e}]},oa=s.memo(e=>{var{dataKey:t,data:a,stroke:r,strokeWidth:i,fill:l,name:o,hide:d,unit:c,tooltipType:u}=e,p={dataDefinedOnItem:a,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:l,dataKey:t,nameKey:void 0,name:ve(o,t),hide:d,type:u,color:r,unit:c}};return s.createElement(et,{tooltipEntrySettings:p})}),we=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function ca(e,t){for(var a=e.length%2!==0?[...e,0]:e,r=[],i=0;i<t;++i)r=[...r,...a];return r}var da=(e,t,a)=>{var r=a.reduce((f,v)=>f+v);if(!r)return we(t,e);for(var i=Math.floor(e/r),l=e%r,o=t-e,d=[],c=0,u=0;c<a.length;u+=a[c],++c)if(u+a[c]>l){d=[...a.slice(0,c),l-u];break}var p=d.length%2===0?[0,o]:[o];return[...ca(a,i),...d,...p].map(f=>"".concat(f,"px")).join(", ")};function ua(e){var{clipPathId:t,points:a,props:r}=e,{dot:i,dataKey:l,needClip:o}=r,{id:d}=r,c=Y(r,ea),u=yt(c);return s.createElement(gt,{points:a,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:l,baseProps:u,needClip:o,clipPathId:t})}function pa(e){var{showLabels:t,children:a,points:r}=e,i=s.useMemo(()=>r?.map(l=>{var o,d,c={x:(o=l.x)!==null&&o!==void 0?o:0,y:(d=l.y)!==null&&d!==void 0?d:0,width:0,lowerWidth:0,upperWidth:0,height:0};return I(I({},c),{},{value:l.value,payload:l.payload,viewBox:c,parentViewBox:void 0,fill:void 0})}),[r]);return s.createElement(ht,{value:t?i:void 0},a)}function se(e){var{clipPathId:t,pathRef:a,points:r,strokeDasharray:i,props:l}=e,{type:o,layout:d,connectNulls:c,needClip:u,shape:p}=l,f=Y(l,ta),v=I(I({},mt(f)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(t,")"):void 0,points:r,type:o,layout:d,connectNulls:c,strokeDasharray:i??l.strokeDasharray});return s.createElement(s.Fragment,null,r?.length>1&&s.createElement(vt,R({shapeType:"curve",option:p},v,{pathRef:a})),s.createElement(ua,{points:r,clipPathId:t,props:l}))}function fa(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function ha(e){var{clipPathId:t,props:a,pathRef:r,previousPointsRef:i,longestAnimatedLengthRef:l}=e,{points:o,strokeDasharray:d,isAnimationActive:c,animationBegin:u,animationDuration:p,animationEasing:f,animateNewValues:v,width:b,height:g,onAnimationEnd:x,onAnimationStart:D}=a,S=i.current,E=ut(o,"recharts-line-"),w=s.useRef(E),[C,k]=s.useState(!1),T=!C,y=s.useCallback(()=>{typeof x=="function"&&x(),k(!1)},[x]),h=s.useCallback(()=>{typeof D=="function"&&D(),k(!0)},[D]),m=fa(r.current),j=s.useRef(0);w.current!==E&&(j.current=l.current,w.current=E);var O=j.current;return s.createElement(pa,{points:o,showLabels:T},a.children,s.createElement(pt,{animationId:E,begin:u,duration:p,isActive:c,easing:f,onAnimationEnd:y,onAnimationStart:h,key:E},P=>{var Ne=_(O,m+O,P),W=Math.min(Ne,m),$;if(c)if(d){var De="".concat(d).split(/[,\s]+/gim).map(A=>parseFloat(A));$=da(W,m,De)}else $=we(m,W);else $=d==null?void 0:String(d);if(P>0&&m>0&&(i.current=o,l.current=Math.max(l.current,W)),S){var Oe=S.length/o.length,X=P===1?o:o.map((A,Ae)=>{var Z=Math.floor(Ae*Oe);if(S[Z]){var J=S[Z];return I(I({},A),{},{x:_(J.x,A.x,P),y:_(J.y,A.y,P)})}return v?I(I({},A),{},{x:_(b*2,A.x,P),y:_(g/2,A.y,P)}):I(I({},A),{},{x:A.x,y:A.y})});return i.current=X,s.createElement(se,{props:a,points:X,clipPathId:t,pathRef:r,strokeDasharray:$})}return s.createElement(se,{props:a,points:o,clipPathId:t,pathRef:r,strokeDasharray:$})}),s.createElement(ft,{label:a.label}))}function ma(e){var{clipPathId:t,props:a}=e,r=s.useRef(null),i=s.useRef(0),l=s.useRef(null);return s.createElement(ha,{props:a,clipPathId:t,previousPointsRef:r,longestAnimatedLengthRef:i,pathRef:l})}var va=(e,t)=>{var a,r;return{x:(a=e.x)!==null&&a!==void 0?a:void 0,y:(r=e.y)!==null&&r!==void 0?r:void 0,value:e.value,errorVal:ye(e.payload,t)}};class ya extends s.Component{render(){var{hide:t,dot:a,points:r,className:i,xAxisId:l,yAxisId:o,top:d,left:c,width:u,height:p,id:f,needClip:v,zIndex:b}=this.props;if(t)return null;var g=ce("recharts-line",i),x=f,{r:D,strokeWidth:S}=nt(a),E=it(a),w=D*2+S,C=v?"url(#clipPath-".concat(E?"":"dots-").concat(x,")"):void 0;return s.createElement(lt,{zIndex:b},s.createElement(st,{className:g},v&&s.createElement("defs",null,s.createElement(ot,{clipPathId:x,xAxisId:l,yAxisId:o}),!E&&s.createElement("clipPath",{id:"clipPath-dots-".concat(x)},s.createElement("rect",{x:c-w/2,y:d-w/2,width:u+w,height:p+w}))),s.createElement(ct,{xAxisId:l,yAxisId:o,data:r,dataPointFormatter:va,errorBarOffset:0},s.createElement(ma,{props:this.props,clipPathId:x}))),s.createElement(dt,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:C}))}}var Ee={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:Xe.line,type:"linear"};function ga(e){var t=K(e,Ee),{activeDot:a,animateNewValues:r,animationBegin:i,animationDuration:l,animationEasing:o,connectNulls:d,dot:c,hide:u,isAnimationActive:p,label:f,legendType:v,xAxisId:b,yAxisId:g,id:x}=t,D=Y(t,aa),{needClip:S}=tt(b,g),E=at(),w=rt(),C=me(),k=de(j=>qt(j,b,g,C,x));if(w!=="horizontal"&&w!=="vertical"||k==null||E==null)return null;var{height:T,width:y,x:h,y:m}=E;return s.createElement(ya,R({},D,{id:x,connectNulls:d,dot:c,activeDot:a,animateNewValues:r,animationBegin:i,animationDuration:l,animationEasing:o,isAnimationActive:p,hide:u,label:f,legendType:v,xAxisId:b,yAxisId:g,points:k,layout:w,height:T,width:y,left:h,top:m,needClip:S}))}function xa(e){var{layout:t,xAxis:a,yAxis:r,xAxisTicks:i,yAxisTicks:l,dataKey:o,bandSize:d,displayedData:c}=e;return c.map((u,p)=>{var f=ye(u,o);if(t==="horizontal"){var v=te({axis:a,ticks:i,bandSize:d,entry:u,index:p}),b=ae(f)?null:r.scale(f);return{x:v,y:b,value:f,payload:u}}var g=ae(f)?null:a.scale(f),x=te({axis:r,ticks:l,bandSize:d,entry:u,index:p});return g==null||x==null?null:{x:g,y:x,value:f,payload:u}}).filter(Boolean)}function ba(e){var t=K(e,Ee),a=me();return s.createElement(Ze,{id:t.id,type:"line"},r=>s.createElement(s.Fragment,null,s.createElement(Je,{legendPayload:sa(t)}),s.createElement(oa,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),s.createElement(qe,{type:"line",id:r,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:a}),s.createElement(ga,R({},t,{id:r}))))}var Se=s.memo(ba,Ye);Se.displayName="Line";var ja=["axis"],Pa=s.forwardRef((e,t)=>s.createElement(xt,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:ja,tooltipPayloadSearcher:bt,categoricalChartProps:e,ref:t}));const wa=e=>{if(!e||e.length===0)return{total:0,byDifficulty:{Easy:0,Medium:0,Hard:0},byType:{"Multiple Choice":0,"True/False":0},byDiscipline:{},avgQuality:0};const t={total:e.length,byDifficulty:{Easy:0,Medium:0,Hard:0},byType:{"Multiple Choice":0,"True/False":0},byDiscipline:{},totalQuality:0,ratedCount:0};return e.forEach(a=>{t.byDifficulty[a.difficulty]!==void 0&&t.byDifficulty[a.difficulty]++,t.byType[a.type]!==void 0&&t.byType[a.type]++,t.byDiscipline[a.discipline]||(t.byDiscipline[a.discipline]=0),t.byDiscipline[a.discipline]++;const r=parseFloat(a.critiqueScore||a.initialQuality);isNaN(r)||(t.totalQuality+=r,t.ratedCount++)}),t.avgQuality=t.ratedCount>0?(t.totalQuality/t.ratedCount).toFixed(1):0,t},M=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8","#82ca9d"],Ea=({questions:e})=>{const t=Ce.map(i=>({name:i,value:e.filter(l=>l.difficulty===i).length})).filter(i=>i.value>0),a=e.reduce((i,l)=>(i[l.discipline]=(i[l.discipline]||0)+1,i),{}),r=Object.entries(a).map(([i,l])=>({name:i,value:l})).sort((i,l)=>l.value-i.value);return n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700",children:[n.jsx("h3",{className:"text-sm font-bold text-slate-300 mb-4 text-center",children:"Difficulty Distribution"}),n.jsx("div",{className:"h-64",children:n.jsx(z,{width:"100%",height:"100%",children:n.jsxs(jt,{children:[n.jsx(Pt,{data:t,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",label:({name:i,percent:l})=>`${i} ${(l*100).toFixed(0)}%`,children:t.map((i,l)=>n.jsx(re,{fill:M[l%M.length]},`cell-${l}`))}),n.jsx(B,{contentStyle:{backgroundColor:"#1e293b",borderColor:"#334155",color:"#f1f5f9"},itemStyle:{color:"#f1f5f9"}})]})})})]}),n.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700",children:[n.jsx("h3",{className:"text-sm font-bold text-slate-300 mb-4 text-center",children:"Questions by Discipline"}),n.jsx("div",{className:"h-64",children:n.jsx(z,{width:"100%",height:"100%",children:n.jsxs(wt,{data:r,layout:"vertical",margin:{top:5,right:30,left:40,bottom:5},children:[n.jsx(Q,{strokeDasharray:"3 3",stroke:"#334155",horizontal:!1}),n.jsx(V,{type:"number",stroke:"#94a3b8"}),n.jsx(H,{type:"category",dataKey:"name",stroke:"#94a3b8",width:100,tick:{fontSize:10}}),n.jsx(B,{cursor:{fill:"#334155",opacity:.4},contentStyle:{backgroundColor:"#1e293b",borderColor:"#334155",color:"#f1f5f9"}}),n.jsx(Et,{dataKey:"value",fill:"#82ca9d",radius:[0,4,4,0],children:r.map((i,l)=>n.jsx(re,{fill:M[l%M.length]},`cell-${l}`))})]})})})]})]})},Sa=({generations:e})=>{const a=[...e].sort((r,i)=>new Date(r.timestamp)-new Date(i.timestamp)).map((r,i)=>({name:`Batch ${i+1}`,date:new Date(r.timestamp).toLocaleDateString(),quality:r.averageQuality||0,cost:(r.estimatedCost||0)*100,tokens:(r.tokensUsed?.input||0)+(r.tokensUsed?.output||0)}));return a.length===0?n.jsx("div",{className:"text-center p-8 text-slate-500",children:"Not enough data to show trends. Generate some questions first!"}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700",children:[n.jsx("h3",{className:"text-sm font-bold text-slate-300 mb-4 text-center",children:"Average Quality Score Trend"}),n.jsx("div",{className:"h-64",children:n.jsx(z,{width:"100%",height:"100%",children:n.jsxs(Pa,{data:a,margin:{top:5,right:30,left:20,bottom:5},children:[n.jsx(Q,{strokeDasharray:"3 3",stroke:"#334155"}),n.jsx(V,{dataKey:"name",stroke:"#94a3b8",tick:{fontSize:10}}),n.jsx(H,{stroke:"#94a3b8",domain:[0,100]}),n.jsx(B,{contentStyle:{backgroundColor:"#1e293b",borderColor:"#334155",color:"#f1f5f9"},labelStyle:{color:"#94a3b8"}}),n.jsx(ge,{}),n.jsx(Se,{type:"monotone",dataKey:"quality",stroke:"#8884d8",activeDot:{r:8},name:"Avg Quality Score"})]})})})]}),n.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700",children:[n.jsx("h3",{className:"text-sm font-bold text-slate-300 mb-4 text-center",children:"Token Usage & Cost Trend"}),n.jsx("div",{className:"h-64",children:n.jsx(z,{width:"100%",height:"100%",children:n.jsxs(St,{data:a,margin:{top:10,right:30,left:0,bottom:0},children:[n.jsx("defs",{children:n.jsxs("linearGradient",{id:"colorTokens",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),n.jsx("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0})]})}),n.jsx(V,{dataKey:"name",stroke:"#94a3b8",tick:{fontSize:10}}),n.jsx(H,{stroke:"#94a3b8"}),n.jsx(Q,{strokeDasharray:"3 3",stroke:"#334155"}),n.jsx(B,{contentStyle:{backgroundColor:"#1e293b",borderColor:"#334155",color:"#f1f5f9"},labelStyle:{color:"#94a3b8"}}),n.jsx(Nt,{type:"monotone",dataKey:"tokens",stroke:"#82ca9d",fillOpacity:1,fill:"url(#colorTokens)",name:"Total Tokens"})]})})}),n.jsx("p",{className:"text-[10px] text-slate-500 text-center mt-2",children:"* Cost is correlated with token usage."})]})]})},Na=({questions:e})=>{const[t,a]=s.useState("overview"),[r,i]=s.useState({generations:[]}),l=s.useMemo(()=>wa(e),[e]);return s.useEffect(()=>{const o=ke();i(o)},[e]),!e||e.length===0?null:n.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-lg p-4 mb-4 animate-in fade-in slide-in-from-top-2",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider flex items-center gap-2",children:[n.jsx(oe,{name:"bar-chart-2",size:14})," Database Metrics"]}),n.jsxs("div",{className:"flex bg-slate-800 rounded-lg p-1 gap-1",children:[n.jsx("button",{onClick:()=>a("overview"),className:`px-3 py-1 text-[10px] font-bold uppercase rounded transition-colors ${t==="overview"?"bg-indigo-600 text-white":"text-slate-400 hover:text-slate-200"}`,children:"Overview"}),n.jsx("button",{onClick:()=>a("distributions"),className:`px-3 py-1 text-[10px] font-bold uppercase rounded transition-colors ${t==="distributions"?"bg-indigo-600 text-white":"text-slate-400 hover:text-slate-200"}`,children:"Distributions"}),n.jsx("button",{onClick:()=>a("trends"),className:`px-3 py-1 text-[10px] font-bold uppercase rounded transition-colors ${t==="trends"?"bg-indigo-600 text-white":"text-slate-400 hover:text-slate-200"}`,children:"Trends"})]})]}),n.jsxs("div",{className:"min-h-[200px]",children:[t==="overview"&&n.jsxs("div",{className:"animate-in fade-in duration-300",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[n.jsxs("div",{className:"bg-slate-800 p-3 rounded border border-slate-700",children:[n.jsx("div",{className:"text-2xl font-bold text-white",children:l.total}),n.jsx("div",{className:"text-[10px] text-slate-400 uppercase",children:"Total Questions"})]}),n.jsxs("div",{className:"bg-slate-800 p-3 rounded border border-slate-700",children:[n.jsx("div",{className:"text-2xl font-bold text-indigo-400",children:l.avgQuality}),n.jsx("div",{className:"text-[10px] text-slate-400 uppercase",children:"Avg Quality"})]}),n.jsxs("div",{className:"bg-slate-800 p-3 rounded border border-slate-700",children:[n.jsx("div",{className:"text-2xl font-bold text-emerald-400",children:l.byType["Multiple Choice"]}),n.jsx("div",{className:"text-[10px] text-slate-400 uppercase",children:"Multiple Choice"})]}),n.jsxs("div",{className:"bg-slate-800 p-3 rounded border border-slate-700",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-400",children:l.byType["True/False"]}),n.jsx("div",{className:"text-[10px] text-slate-400 uppercase",children:"True/False"})]})]}),n.jsx("div",{className:"space-y-3",children:n.jsxs("div",{children:[n.jsx("div",{className:"flex justify-between text-[10px] text-slate-400 mb-1 uppercase font-bold",children:n.jsx("span",{children:"Difficulty Distribution"})}),n.jsxs("div",{className:"flex h-2 rounded-full overflow-hidden bg-slate-800",children:[n.jsx("div",{className:"bg-green-500",style:{width:`${l.byDifficulty.Easy/l.total*100}%`},title:`Easy: ${l.byDifficulty.Easy}`}),n.jsx("div",{className:"bg-yellow-500",style:{width:`${l.byDifficulty.Medium/l.total*100}%`},title:`Medium: ${l.byDifficulty.Medium}`}),n.jsx("div",{className:"bg-red-500",style:{width:`${l.byDifficulty.Hard/l.total*100}%`},title:`Hard: ${l.byDifficulty.Hard}`})]}),n.jsxs("div",{className:"flex justify-between text-[10px] text-slate-500 mt-1",children:[n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"})," Easy"]}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500"})," Medium"]}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"})," Hard"]})]})]})})]}),t==="distributions"&&n.jsx("div",{className:"animate-in fade-in duration-300",children:n.jsx(Ea,{questions:e})}),t==="trends"&&n.jsx("div",{className:"animate-in fade-in duration-300",children:n.jsx(Sa,{generations:r.generations})})]})]})},Aa=({questions:e,sheetUrl:t,onLoad:a,onLoadFirestore:r,onClearView:i,onHardReset:l,onUpdateQuestion:o,onKickBack:d,isProcessing:c,showMessage:u,filterMode:p="all",sortBy:f="default"})=>{const[v,b]=s.useState(!1),[g,x]=s.useState(0),[D,S]=s.useState(!1),E=s.useRef(null);s.useEffect(()=>{const y=h=>{E.current&&!E.current.contains(h.target)&&S(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]);const w=s.useMemo(()=>{if(!e)return[];const h=[...e];switch(f){case"newest":return h.sort((m,j)=>{const O=m.createdAt||m.id||0;return(j.createdAt||j.id||0)-O});case"oldest":return h.sort((m,j)=>{const O=m.createdAt||m.id||0,P=j.createdAt||j.id||0;return O-P});case"language":return h.sort((m,j)=>(m.language||"English").localeCompare(j.language||"English"));case"discipline":return h.sort((m,j)=>(m.discipline||"").localeCompare(j.discipline||""));case"difficulty":{const m={Easy:1,Medium:2,Hard:3};return h.sort((j,O)=>(m[j.difficulty]||0)-(m[O.difficulty]||0))}case"default":default:return h}},[e,f,p]),C=s.useMemo(()=>{if(!e)return new Map;const y=new Map;return e.forEach(h=>{h.uniqueId&&(y.has(h.uniqueId)||y.set(h.uniqueId,new Set),y.get(h.uniqueId).add(h.language||"English"))}),y},[e]),k=s.useMemo(()=>{if(!e)return new Map;const y=new Map;return e.forEach(h=>{if(!h.uniqueId)return;const m=`${h.uniqueId}::${h.language||"English"}`;y.set(m,h)}),y},[e]),T=(y,h)=>{if(!y.uniqueId){u("Cannot switch: Question has no unique ID for linking translations.");return}const m=`${y.uniqueId}::${h}`,j=k.get(m);if(j){const O=w.findIndex(P=>P.id===j.id);if(O!==-1){const P=document.querySelector(`[data-question-index="${O}"]`);P&&(P.scrollIntoView({behavior:"smooth",block:"center"}),P.classList.add("ring-2","ring-green-500"),setTimeout(()=>P.classList.remove("ring-2","ring-green-500"),2e3)),u(`Scrolled to ${h} version.`)}}else u(`${h} version not found in current view. Try using "Sort by Language" to find it.`)};return n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"flex justify-between items-center bg-blue-900/20 p-4 rounded border border-blue-800/50",children:n.jsx("div",{className:"flex items-center gap-4",children:n.jsxs("div",{children:[n.jsxs("h2",{className:"text-lg font-bold text-blue-400 flex items-center gap-2",children:[n.jsx(oe,{name:"database"})," Database View"]}),n.jsxs("p",{className:"text-xs text-blue-300/70",children:["Viewing ",w.length," of ",e.length," loaded records"]})]})})}),n.jsx(Na,{questions:e}),w.length===0?n.jsx("div",{className:"text-center py-10 text-slate-500",children:"No questions loaded from database. Click Refresh."}):w.map((y,h)=>n.jsx("div",{"data-question-index":h,className:"opacity-75 hover:opacity-100 transition-all",children:n.jsx(Le,{q:y,onUpdateStatus:()=>{},onExplain:()=>{},onVariate:()=>{},onCritique:()=>{},onTranslateSingle:()=>{},onSwitchLanguage:m=>T(y,m),onDelete:()=>{},onUpdateQuestion:o,onKickBack:d,availableLanguages:C.get(y.uniqueId),isProcessing:!1,appMode:"database",showMessage:u})},h))]})};export{Aa as default};

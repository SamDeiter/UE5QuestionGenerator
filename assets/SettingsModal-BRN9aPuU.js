import{r as f,g as h,j as e,I as t,T as j,U as o,d as n,c as N,a as y}from"./index-Cd6w-U-Y.js";const E=({showSettings:x,setShowSettings:m,config:s,handleChange:a,showApiKey:l,setShowApiKey:b,onClearData:u})=>{const[i,d]=f.useState(!1);if(!x)return null;const p=h(),g=async()=>{if(!window.confirm(`⚠️ FACTORY RESET ⚠️

This will PERMANENTLY DELETE ALL data from:
• Google Spreadsheet (all Master_ sheets)
• Firestore Database (cloud)
• Local storage (questions, settings, analytics)

This action CANNOT be undone. Continue?`))return;if(window.prompt("Type DELETE to confirm permanent deletion of ALL data:")!=="DELETE"){alert("Factory reset cancelled. You did not type 'DELETE'.");return}d(!0);try{s.sheetUrl&&N(s.sheetUrl);const r=await y();console.log(`Deleted ${r} questions from Firestore`),localStorage.clear(),alert(`Factory Reset Complete!

• Firestore: ${r} questions deleted
• Spreadsheet: Clearing in new tab
• Local Storage: Cleared

Page will reload.`),window.location.reload()}catch(r){console.error("Factory reset error:",r),alert("Error during factory reset: "+r.message),d(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-xl shadow-2xl w-full max-w-md overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"p-4 border-b border-slate-700 flex justify-between items-center bg-slate-800/50",children:[e.jsxs("h2",{className:"text-lg font-bold text-white flex items-center gap-2",children:[e.jsx(t,{name:"settings",className:"text-slate-400"})," Settings"]}),e.jsx("button",{onClick:()=>m(!1),className:"text-slate-400 hover:text-white transition-colors","aria-label":"Close Settings",children:e.jsx(t,{name:"x"})})]}),e.jsxs("div",{className:"p-6 space-y-6 max-h-[80vh] overflow-y-auto custom-scrollbar",children:[e.jsx(j,{tokenUsage:p}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-1",children:o.API_KEY_LABEL}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:l?"text":"password",name:"apiKey",value:s.apiKey,onChange:a,placeholder:"AIzaSy...",className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded text-sm text-white focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none pr-10 transition-all"}),e.jsx("button",{onClick:()=>b(!l),className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-500 hover:text-white transition-colors","aria-label":l?"Hide API Key":"Show API Key",children:e.jsx(t,{name:l?"eye-off":"eye",size:16})})]}),e.jsx("p",{className:"text-[10px] text-slate-500 mt-1",children:"Required for generating questions. Stored locally."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-1",children:o.SHEET_URL_LABEL}),e.jsx("input",{type:"text",name:"sheetUrl",value:s.sheetUrl,onChange:a,placeholder:"https://script.google.com/...",className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded text-sm text-white focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none transition-all"}),e.jsx("p",{className:"text-[10px] text-slate-500 mt-1",children:"Required for Load/Export to Sheets."})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-1",children:"Creator Name"}),e.jsx("input",{type:"text",name:"creatorName",value:s.creatorName,onChange:a,className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded text-sm text-white focus:border-indigo-500 outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-1",children:"Reviewer Name"}),e.jsx("input",{type:"text",name:"reviewerName",value:s.reviewerName,onChange:a,className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded text-sm text-white focus:border-indigo-500 outline-none transition-all"})]})]}),e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-700",children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-300 mb-3 flex items-center gap-2",children:[e.jsx(t,{name:"database",size:16,className:"text-purple-400"}),"Vertex AI Training Data"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>n(!0),className:"flex-1 px-3 py-2 bg-purple-900/30 hover:bg-purple-900/50 text-purple-200 text-xs font-bold rounded border border-purple-700/50 transition-colors flex items-center justify-center gap-2",title:"Download questions with >75% score",children:[e.jsx(t,{name:"download",size:14}),"Download Good Data"]}),e.jsxs("button",{onClick:()=>n(!1),className:"flex-1 px-3 py-2 bg-slate-700/30 hover:bg-slate-700/50 text-slate-400 text-xs font-bold rounded border border-slate-600/50 transition-colors flex items-center justify-center gap-2",title:"Download questions with <75% score",children:[e.jsx(t,{name:"download",size:14}),"Download Bad Data"]})]}),e.jsxs("button",{onClick:()=>{const c=n("all");alert(`Exported ${c} total questions for training`)},className:"w-full mt-2 px-3 py-2 bg-blue-900/20 hover:bg-blue-900/30 text-blue-400 rounded flex items-center justify-center gap-2 transition-colors text-xs font-bold border border-blue-900/30",title:"Download all questions",children:[e.jsx(t,{name:"download",size:14}),"Export All Training Data"]}),e.jsx("p",{className:"text-[10px] text-slate-500 mt-2 text-center",children:"Exports JSONL format for Vertex AI fine-tuning."})]}),e.jsxs("div",{className:"bg-red-900/10 p-4 rounded-lg border border-red-900/30",children:[e.jsxs("h3",{className:"text-sm font-bold text-red-400 mb-2 flex items-center gap-2",children:[e.jsx(t,{name:"alert-triangle",size:16}),"Danger Zone"]}),e.jsxs("button",{onClick:u,className:"w-full px-4 py-2 bg-red-900/20 hover:bg-red-900/40 text-red-400 text-sm font-bold rounded border border-red-900/50 transition-colors flex items-center justify-center gap-2",children:[e.jsx(t,{name:"trash-2",size:16}),o.CLEAR_DATA_BTN]}),e.jsx("button",{onClick:g,disabled:i,className:"w-full mt-3 px-4 py-2 bg-red-950 hover:bg-red-900 text-red-500 text-sm font-bold rounded border border-red-900/50 transition-colors flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:i?e.jsxs(e.Fragment,{children:[e.jsx(t,{name:"loader",size:16,className:"animate-spin"})," Resetting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(t,{name:"bomb",size:16})," Factory Reset (Nuke Everything)"]})}),e.jsx("p",{className:"text-[10px] text-red-400/70 mt-2 text-center",children:"Deletes ALL data: Spreadsheet + Firestore + Local Storage"})]})]})]})})};export{E as default};

import{r as v,j as e,I as s,T,g as E,a as D,U as C,d as k}from"./index-B0bU9VwM.js";const z=({discipline:i,customTags:u,onSaveCustomTags:o})=>{const[c,p]=v.useState(!1),[x,j]=v.useState(""),[l,h]=v.useState(null),[r,d]=v.useState(""),b=T[i]||[],a=u[i]||[],g=()=>{if(!x.trim())return;const t=x.startsWith("#")?x:`#${x}`;if(b.includes(t)||a.includes(t)){alert("This tag already exists!");return}const n={...u,[i]:[...a,t]};o(n),j("")},y=t=>{if(!confirm(`Delete tag "${t}"?`))return;const n={...u,[i]:a.filter(N=>N!==t)};o(n)},w=t=>{h(t),d(t)},f=()=>{if(!r.trim())return;const t=r.startsWith("#")?r:`#${r}`;if(t!==l&&(b.includes(t)||a.includes(t))){alert("This tag already exists!");return}const n={...u,[i]:a.map(N=>N===l?t:N)};o(n),h(null),d("")},m=()=>{h(null),d("")};return e.jsxs("div",{className:"border border-slate-700 rounded-lg bg-slate-900/50 overflow-hidden",children:[e.jsxs("button",{onClick:()=>p(!c),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-slate-800/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{name:"tag",size:16}),e.jsxs("span",{className:"text-sm font-semibold text-slate-200",children:["Custom Tags for ",i]}),a.length>0&&e.jsxs("span",{className:"text-xs bg-orange-500/20 text-orange-300 px-2 py-0.5 rounded-full",children:[a.length," custom"]})]}),e.jsx(s,{name:c?"chevron-up":"chevron-down",size:16})]}),c&&e.jsxs("div",{className:"px-4 py-3 space-y-4 border-t border-slate-700",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold uppercase text-slate-400",children:"Add New Tag"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:x,onChange:t=>j(t.target.value),onKeyDown:t=>{t.key==="Enter"&&g(),t.key==="Escape"&&j("")},placeholder:"e.g., CustomFeature or #CustomFeature",className:"flex-1 px-3 py-2 bg-slate-800 border border-slate-700 rounded text-sm outline-none focus:border-orange-500"}),e.jsxs("button",{onClick:g,disabled:!x.trim(),className:"px-4 py-2 bg-orange-600 hover:bg-orange-700 disabled:bg-slate-700 disabled:text-slate-500 text-white rounded text-sm font-medium transition-colors flex items-center gap-2",children:[e.jsx(s,{name:"plus",size:14}),"Add"]})]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Create custom tags to focus question generation on specific topics"})]}),a.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-xs font-bold uppercase text-slate-400",children:["Your Custom Tags (",a.length,")"]}),e.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto custom-scrollbar",children:a.map(t=>e.jsx("div",{className:"flex items-center gap-2 p-2 bg-slate-800 rounded border border-slate-700 hover:border-slate-600 transition-colors",children:l===t?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",value:r,onChange:n=>d(n.target.value),onKeyDown:n=>{n.key==="Enter"&&f(),n.key==="Escape"&&m()},className:"flex-1 px-2 py-1 bg-slate-900 border border-orange-500 rounded text-sm outline-none",autoFocus:!0}),e.jsx("button",{onClick:f,className:"p-1 text-green-400 hover:text-green-300",title:"Save",children:e.jsx(s,{name:"check",size:14})}),e.jsx("button",{onClick:m,className:"p-1 text-red-400 hover:text-red-300",title:"Cancel",children:e.jsx(s,{name:"x",size:14})})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"flex-1 text-sm text-orange-300",children:t}),e.jsx("button",{onClick:()=>w(t),className:"p-1 text-slate-400 hover:text-blue-400",title:"Edit",children:e.jsx(s,{name:"edit",size:14})}),e.jsx("button",{onClick:()=>y(t),className:"p-1 text-slate-400 hover:text-red-400",title:"Delete",children:e.jsx(s,{name:"trash-2",size:14})})]})},t))})]}),e.jsxs("div",{className:"pt-3 border-t border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("label",{className:"text-xs font-bold uppercase text-slate-400",children:["Predefined Tags (",b.length,")"]}),e.jsx("span",{className:"text-xs text-slate-500",children:"Read-only"})]}),e.jsx("div",{className:"flex flex-wrap gap-1.5 max-h-32 overflow-y-auto custom-scrollbar",children:b.map(t=>e.jsx("span",{className:"text-xs px-2 py-1 bg-slate-800/50 border border-slate-700 text-slate-400 rounded",children:t},t))})]})]})]})},A=({showSettings:i,setShowSettings:u,config:o,handleChange:c,showApiKey:p,setShowApiKey:x,onClearData:j,files:l,handleDetectTopics:h,isDetecting:r,fileInputRef:d,handleFileChange:b,removeFile:a,isApiReady:g,customTags:y,onSaveCustomTags:w})=>{if(!i)return null;const f=E();return e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-xl shadow-2xl w-full max-w-md overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"p-4 border-b border-slate-700 flex justify-between items-center bg-slate-800/50",children:[e.jsxs("h2",{className:"text-lg font-bold text-white flex items-center gap-2",children:[e.jsx(s,{name:"settings",className:"text-slate-400"})," Settings"]}),e.jsx("button",{onClick:()=>u(!1),className:"text-slate-400 hover:text-white transition-colors","aria-label":"Close Settings",children:e.jsx(s,{name:"x"})})]}),e.jsxs("div",{className:"p-6 space-y-6 max-h-[80vh] overflow-y-auto custom-scrollbar",children:[e.jsx(D,{tokenUsage:f}),e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-700",children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-300 mb-3 flex items-center gap-2",children:[e.jsx(s,{name:"file-text",size:16,className:"text-blue-400"}),"Source Material"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsx("label",{className:"text-xs font-bold uppercase text-slate-400",children:"Source Files"}),l&&l.length>0&&e.jsx("button",{onClick:h,disabled:r||!g,className:"text-[10px] flex items-center gap-1 text-indigo-400 bg-indigo-900/50 px-2 py-1 rounded border border-indigo-700/50 disabled:opacity-50 disabled:cursor-not-allowed",children:r?"...":"Detect"})]}),e.jsxs("div",{onClick:()=>d?.current?.click(),className:"border-2 border-dashed border-slate-700 rounded p-4 hover:bg-slate-900 cursor-pointer text-center bg-slate-900/50 transition-colors",children:[e.jsx(s,{name:"upload",className:"mx-auto text-slate-600 mb-2"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Upload .csv"}),e.jsx("input",{type:"file",ref:d,onChange:b,multiple:!0,className:"hidden"})]}),l&&l.map((m,t)=>e.jsxs("div",{className:"flex justify-between bg-slate-900 p-2 rounded border border-slate-800 text-xs text-slate-400",children:[e.jsx("span",{className:"truncate",children:m.name}),e.jsx("button",{onClick:()=>a(t),className:"text-red-500 hover:text-red-400 transition-colors",children:"x"})]},t))]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-1",children:C.API_KEY_LABEL}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:p?"text":"password",name:"apiKey",value:o.apiKey,onChange:c,placeholder:"AIzaSy...",className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded text-sm text-white focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none pr-10 transition-all"}),e.jsx("button",{onClick:()=>x(!p),className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-500 hover:text-white transition-colors","aria-label":p?"Hide API Key":"Show API Key",children:e.jsx(s,{name:p?"eye-off":"eye",size:16})})]}),e.jsx("p",{className:"text-[10px] text-slate-500 mt-1",children:"Required for generating questions. Stored locally."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-1",children:C.SHEET_URL_LABEL}),e.jsx("input",{type:"text",name:"sheetUrl",value:o.sheetUrl,onChange:c,placeholder:"https://script.google.com/...",className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded text-sm text-white focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none transition-all"}),e.jsx("p",{className:"text-[10px] text-slate-500 mt-1",children:"Required for Load/Export to Sheets."})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-1",children:"Creator Name"}),e.jsx("input",{type:"text",name:"creatorName",value:o.creatorName,onChange:c,className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded text-sm text-white focus:border-indigo-500 outline-none transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-1",children:"Reviewer Name"}),e.jsx("input",{type:"text",name:"reviewerName",value:o.reviewerName,onChange:c,className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded text-sm text-white focus:border-indigo-500 outline-none transition-all"})]})]}),e.jsxs("div",{className:"space-y-3 pt-4 border-t border-slate-800",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsx("label",{className:"text-xs font-bold uppercase text-slate-500",children:"Source Files (CSV)"}),l&&l.length>0&&e.jsx("button",{onClick:h,disabled:r||!g,className:"text-[10px] flex items-center gap-1 text-indigo-400 bg-indigo-900/50 px-2 py-1 rounded border border-indigo-700/50 disabled:opacity-50",children:r?"...":"Detect Topics"})]}),e.jsxs("div",{onClick:()=>d.current?.click(),className:"border-2 border-dashed border-slate-700 rounded p-4 hover:bg-slate-800 cursor-pointer text-center bg-slate-800/50 transition-colors",children:[e.jsx(s,{name:"upload",className:"mx-auto text-slate-600 mb-2"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Click to upload .csv"}),e.jsx("input",{type:"file",ref:d,onChange:b,multiple:!0,className:"hidden"})]}),l&&l.map((m,t)=>e.jsxs("div",{className:"flex justify-between bg-slate-800 p-2 rounded border border-slate-700 text-xs text-slate-400",children:[e.jsx("span",{className:"truncate",children:m.name}),e.jsx("button",{onClick:()=>a(t),className:"text-red-500 hover:text-red-400",children:e.jsx(s,{name:"x",size:14})})]},t))]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-300 flex items-center gap-2",children:[e.jsx(s,{name:"tag",size:16,className:"text-orange-400"}),"Custom Tags"]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Create custom tags to focus question generation on specific topics within each discipline."}),e.jsx(z,{discipline:o.discipline,customTags:y||{},onSaveCustomTags:w})]}),e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-700",children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-300 mb-3 flex items-center gap-2",children:[e.jsx(s,{name:"database",size:16,className:"text-purple-400"}),"Vertex AI Training Data"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>k(!0),className:"flex-1 px-3 py-2 bg-purple-900/30 hover:bg-purple-900/50 text-purple-200 text-xs font-bold rounded border border-purple-700/50 transition-colors flex items-center justify-center gap-2",title:"Download questions with >75% score",children:[e.jsx(s,{name:"download",size:14}),"Download Good Data"]}),e.jsxs("button",{onClick:()=>k(!1),className:"flex-1 px-3 py-2 bg-slate-700/30 hover:bg-slate-700/50 text-slate-400 text-xs font-bold rounded border border-slate-600/50 transition-colors flex items-center justify-center gap-2",title:"Download questions with <75% score",children:[e.jsx(s,{name:"download",size:14}),"Download Bad Data"]})]}),e.jsxs("button",{onClick:()=>{const m=k("all");alert(`Exported ${m} total questions for training`)},className:"w-full mt-2 px-3 py-2 bg-blue-900/20 hover:bg-blue-900/30 text-blue-400 rounded flex items-center justify-center gap-2 transition-colors text-xs font-bold border border-blue-900/30",title:"Download all questions",children:[e.jsx(s,{name:"download",size:14}),"Export All Training Data"]}),e.jsx("p",{className:"text-[10px] text-slate-500 mt-2 text-center",children:"Exports JSONL format for Vertex AI fine-tuning."})]}),e.jsxs("div",{className:"bg-red-900/10 p-4 rounded-lg border border-red-900/30",children:[e.jsxs("h3",{className:"text-sm font-bold text-red-400 mb-2 flex items-center gap-2",children:[e.jsx(s,{name:"alert-triangle",size:16}),"Data Management"]}),e.jsx("p",{className:"text-xs text-slate-400 mb-3",children:"For destructive operations (clear data, factory reset), use the Danger Zone."}),e.jsxs("button",{onClick:()=>{u(!1),window.openDangerZone&&window.openDangerZone()},className:"w-full px-4 py-2 bg-red-900/20 hover:bg-red-900/40 text-red-400 text-sm font-bold rounded border border-red-900/50 transition-colors flex items-center justify-center gap-2",children:[e.jsx(s,{name:"alert-triangle",size:16}),"Open Danger Zone"]})]})]})]})})};export{A as default};

import{r as l,a as Ce,C as ke,j as n,b as Ie,I as A,Q as Le,s as Te,c as ze}from"./index-Cqh28Q9H.js";import{r as U,c as pe,a as Re,S as $e,b as Fe,u as fe,s as _e,d as Be,e as Me,f as Ke,g as We,h as Qe,i as He,j as he,k as Ve,l as re,m as Ge,n as q,o as me,p as ve,q as xe,t as Ue,v as Ye,w as Ze,x as ne,y as Xe,D as Je,z as ge,R as qe,A as et,B as tt,C as ye,E as at,F as rt,G as nt,H as it,I as st,J as lt,Z as ot,L as ct,K as dt,M as ut,N as pt,O as be,P as ie,Q as se,T as ft,U as ht,V as M,W as mt,X as vt,Y as xt,_ as gt,$ as yt,a0 as bt,a1 as jt,a2 as wt,a3 as H,a4 as Pt,a5 as Et,a6 as le,a7 as V,a8 as St,a9 as Y,aa as Z,ab as X,ac as Nt,ad as Dt,ae as Ot}from"./AreaChart-CvVhtkZ-.js";const At=e=>{if(!e||e.length===0)return{total:0,byDifficulty:{Easy:0,Medium:0,Hard:0},byType:{"Multiple Choice":0,"True/False":0},byDiscipline:{},avgQuality:0};const t={total:e.length,byDifficulty:{Easy:0,Medium:0,Hard:0},byType:{"Multiple Choice":0,"True/False":0},byDiscipline:{},totalQuality:0,ratedCount:0};return e.forEach(a=>{t.byDifficulty[a.difficulty]!==void 0&&t.byDifficulty[a.difficulty]++,t.byType[a.type]!==void 0&&t.byType[a.type]++,t.byDiscipline[a.discipline]||(t.byDiscipline[a.discipline]=0),t.byDiscipline[a.discipline]++;const r=parseFloat(a.critiqueScore||a.initialQuality);isNaN(r)||(t.totalQuality+=r,t.ratedCount++)}),t.avgQuality=t.ratedCount>0?(t.totalQuality/t.ratedCount).toFixed(1):0,t};function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},G.apply(null,arguments)}function oe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function Ct(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?oe(Object(a),!0).forEach(function(r){kt(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):oe(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function kt(e,t,a){return(t=It(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function It(e){var t=Lt(e,"string");return typeof t=="symbol"?t:t+""}function Lt(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var C=32,Tt={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function zt(e){var{data:t,iconType:a,inactiveColor:r}=e,i=C/2,s=C/6,c=C/3,d=t.inactive?r:t.color,o=a??t.type;if(o==="none")return null;if(o==="plainline"){var u;return l.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:(u=t.payload)===null||u===void 0?void 0:u.strokeDasharray,x1:0,y1:i,x2:C,y2:i,className:"recharts-legend-icon"})}if(o==="line")return l.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(i,"h").concat(c,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*c,",").concat(i,`
            H`).concat(C,"M").concat(2*c,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(c,",").concat(i),className:"recharts-legend-icon"});if(o==="rect")return l.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(C/8,"h").concat(C,"v").concat(C*3/4,"h").concat(-C,"z"),className:"recharts-legend-icon"});if(l.isValidElement(t.legendIcon)){var p=Ct({},t);return delete p.legendIcon,l.cloneElement(t.legendIcon,p)}return l.createElement(Fe,{fill:d,cx:i,cy:i,size:C,sizeType:"diameter",type:o})}function Rt(e){var{payload:t,iconSize:a,layout:r,formatter:i,inactiveColor:s,iconType:c}=e,d={x:0,y:0,width:C,height:C},o={display:r==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((p,m)=>{var x=p.formatter||i,b=pe({"recharts-legend-item":!0,["legend-item-".concat(m)]:!0,inactive:p.inactive});if(p.type==="none")return null;var g=p.inactive?s:p.color,y=x?x(p.value,p,m):p.value;return l.createElement("li",G({className:b,style:o,key:"legend-item-".concat(m)},Re(e,p,m)),l.createElement($e,{width:a,height:a,viewBox:d,style:u,"aria-label":"".concat(y," legend icon")},l.createElement(zt,{data:p,iconType:c,inactiveColor:s})),l.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},y))})}var $t=e=>{var t=U(e,Tt),{payload:a,layout:r,align:i}=t;if(!a||!a.length)return null;var s={padding:0,margin:0,textAlign:r==="horizontal"?i:"left"};return l.createElement("ul",{className:"recharts-default-legend",style:s},l.createElement(Rt,G({},t,{payload:a})))};function Ft(){return fe(_e)}var _t=["contextPayload"];function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},J.apply(null,arguments)}function ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?ce(Object(a),!0).forEach(function(r){Bt(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ce(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Bt(e,t,a){return(t=Mt(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Mt(e){var t=Kt(e,"string");return typeof t=="symbol"?t:t+""}function Kt(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wt(e,t){if(e==null)return{};var a,r,i=Qt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Qt(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}function Ht(e){return e.value}function Vt(e){var{contextPayload:t}=e,a=Wt(e,_t),r=Ge(t,e.payloadUniqBy,Ht),i=_(_({},a),{},{payload:r});return l.isValidElement(e.content)?l.cloneElement(e.content,i):typeof e.content=="function"?l.createElement(e.content,i):l.createElement($t,i)}function Gt(e,t,a,r,i,s){var{layout:c,align:d,verticalAlign:o}=t,u,p;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(d==="center"&&c==="vertical"?u={left:((r||0)-s.width)/2}:u=d==="right"?{right:a&&a.right||0}:{left:a&&a.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(o==="middle"?p={top:((i||0)-s.height)/2}:p=o==="bottom"?{bottom:a&&a.bottom||0}:{top:a&&a.top||0}),_(_({},u),p)}function Ut(e){var t=he();return l.useEffect(()=>{t(Ve(e))},[t,e]),null}function Yt(e){var t=he();return l.useEffect(()=>(t(re(e)),()=>{t(re({width:0,height:0}))}),[t,e]),null}function Zt(e,t,a,r){return e==="vertical"&&He(t)?{height:t}:e==="horizontal"?{width:a||r}:null}var Xt={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function je(e){var t=U(e,Xt),a=Ft(),r=Be(),i=Me(),{width:s,height:c,wrapperStyle:d,portal:o}=t,[u,p]=Ke([a]),m=We(),x=Qe();if(m==null||x==null)return null;var b=m-(i?.left||0)-(i?.right||0),g=Zt(t.layout,c,s,b),y=o?d:_(_({position:"absolute",width:g?.width||s||"auto",height:g?.height||c||"auto"},Gt(d,t,i,m,x,u)),d),O=o??r;if(O==null||a==null)return null;var S=l.createElement("div",{className:"recharts-legend-wrapper",style:y,ref:p},l.createElement(Ut,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!o&&l.createElement(Yt,{width:u.width,height:u.height}),l.createElement(Vt,J({},t,g,{margin:i,chartWidth:m,chartHeight:x,contextPayload:a})));return Ce.createPortal(S,O)}je.displayName="Legend";var we=(e,t,a,r)=>ve(e,"xAxis",t,r),Pe=(e,t,a,r)=>xe(e,"xAxis",t,r),Ee=(e,t,a,r)=>ve(e,"yAxis",a,r),Se=(e,t,a,r)=>xe(e,"yAxis",a,r),Jt=q([me,we,Ee,Pe,Se],(e,t,a,r,i)=>Ze(e,"xAxis")?ne(t,r,!1):ne(a,i,!1)),qt=(e,t,a,r,i)=>i;function ea(e){return e.type==="line"}var ta=q([Ye,qt],(e,t)=>e.filter(ea).find(a=>a.id===t)),aa=q([me,we,Ee,Pe,Se,ta,Jt,Ue],(e,t,a,r,i,s,c,d)=>{var{chartData:o,dataStartIndex:u,dataEndIndex:p}=d;if(!(s==null||t==null||a==null||r==null||i==null||r.length===0||i.length===0||c==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:m,data:x}=s,b;if(x!=null&&x.length>0?b=x:b=o?.slice(u,p+1),b!=null)return wa({layout:e,xAxis:t,yAxis:a,xAxisTicks:r,yAxisTicks:i,dataKey:m,bandSize:c,displayedData:b})}}),ra=["id"],na=["type","layout","connectNulls","needClip","shape"],ia=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},K.apply(null,arguments)}function de(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?de(Object(a),!0).forEach(function(r){sa(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):de(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function sa(e,t,a){return(t=la(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function la(e){var t=oa(e,"string");return typeof t=="symbol"?t:t+""}function oa(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ee(e,t){if(e==null)return{};var a,r,i=ca(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function ca(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var da=e=>{var{dataKey:t,name:a,stroke:r,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:r,value:ye(a,t),payload:e}]},ua=l.memo(e=>{var{dataKey:t,data:a,stroke:r,strokeWidth:i,fill:s,name:c,hide:d,unit:o,tooltipType:u}=e,p={dataDefinedOnItem:a,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:s,dataKey:t,nameKey:void 0,name:ye(c,t),hide:d,type:u,color:r,unit:o}};return l.createElement(at,{tooltipEntrySettings:p})}),Ne=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function pa(e,t){for(var a=e.length%2!==0?[...e,0]:e,r=[],i=0;i<t;++i)r=[...r,...a];return r}var fa=(e,t,a)=>{var r=a.reduce((m,x)=>m+x);if(!r)return Ne(t,e);for(var i=Math.floor(e/r),s=e%r,c=t-e,d=[],o=0,u=0;o<a.length;u+=a[o],++o)if(u+a[o]>s){d=[...a.slice(0,o),s-u];break}var p=d.length%2===0?[0,c]:[c];return[...pa(a,i),...d,...p].map(m=>"".concat(m,"px")).join(", ")};function ha(e){var{clipPathId:t,points:a,props:r}=e,{dot:i,dataKey:s,needClip:c}=r,{id:d}=r,o=ee(r,ra),u=yt(o);return l.createElement(bt,{points:a,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:s,baseProps:u,needClip:c,clipPathId:t})}function ma(e){var{showLabels:t,children:a,points:r}=e,i=l.useMemo(()=>r?.map(s=>{var c,d,o={x:(c=s.x)!==null&&c!==void 0?c:0,y:(d=s.y)!==null&&d!==void 0?d:0,width:0,lowerWidth:0,upperWidth:0,height:0};return I(I({},o),{},{value:s.value,payload:s.payload,viewBox:o,parentViewBox:void 0,fill:void 0})}),[r]);return l.createElement(vt,{value:t?i:void 0},a)}function ue(e){var{clipPathId:t,pathRef:a,points:r,strokeDasharray:i,props:s}=e,{type:c,layout:d,connectNulls:o,needClip:u,shape:p}=s,m=ee(s,na),x=I(I({},xt(m)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(t,")"):void 0,points:r,type:c,layout:d,connectNulls:o,strokeDasharray:i??s.strokeDasharray});return l.createElement(l.Fragment,null,r?.length>1&&l.createElement(gt,K({shapeType:"curve",option:p},x,{pathRef:a})),l.createElement(ha,{points:r,clipPathId:t,props:s}))}function va(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function xa(e){var{clipPathId:t,props:a,pathRef:r,previousPointsRef:i,longestAnimatedLengthRef:s}=e,{points:c,strokeDasharray:d,isAnimationActive:o,animationBegin:u,animationDuration:p,animationEasing:m,animateNewValues:x,width:b,height:g,onAnimationEnd:y,onAnimationStart:O}=a,S=i.current,P=ft(c,"recharts-line-"),E=l.useRef(P),[k,L]=l.useState(!1),$=!k,R=l.useCallback(()=>{typeof y=="function"&&y(),L(!1)},[y]),B=l.useCallback(()=>{typeof O=="function"&&O(),L(!0)},[O]),T=va(r.current),F=l.useRef(0);E.current!==P&&(F.current=s.current,E.current=P);var W=F.current;return l.createElement(ma,{points:c,showLabels:$},a.children,l.createElement(ht,{animationId:P,begin:u,duration:p,isActive:o,easing:m,onAnimationEnd:R,onAnimationStart:B,key:P},z=>{var h=M(W,T+W,z),f=Math.min(h,T),v;if(o)if(d){var j="".concat(d).split(/[,\s]+/gim).map(N=>parseFloat(N));v=fa(f,T,j)}else v=Ne(T,f);else v=d==null?void 0:String(d);if(z>0&&T>0&&(i.current=c,s.current=Math.max(s.current,f)),S){var w=S.length/c.length,D=z===1?c:c.map((N,Ae)=>{var te=Math.floor(Ae*w);if(S[te]){var ae=S[te];return I(I({},N),{},{x:M(ae.x,N.x,z),y:M(ae.y,N.y,z)})}return x?I(I({},N),{},{x:M(b*2,N.x,z),y:M(g/2,N.y,z)}):I(I({},N),{},{x:N.x,y:N.y})});return i.current=D,l.createElement(ue,{props:a,points:D,clipPathId:t,pathRef:r,strokeDasharray:v})}return l.createElement(ue,{props:a,points:c,clipPathId:t,pathRef:r,strokeDasharray:v})}),l.createElement(mt,{label:a.label}))}function ga(e){var{clipPathId:t,props:a}=e,r=l.useRef(null),i=l.useRef(0),s=l.useRef(null);return l.createElement(xa,{props:a,clipPathId:t,previousPointsRef:r,longestAnimatedLengthRef:i,pathRef:s})}var ya=(e,t)=>{var a,r;return{x:(a=e.x)!==null&&a!==void 0?a:void 0,y:(r=e.y)!==null&&r!==void 0?r:void 0,value:e.value,errorVal:be(e.payload,t)}};class ba extends l.Component{render(){var{hide:t,dot:a,points:r,className:i,xAxisId:s,yAxisId:c,top:d,left:o,width:u,height:p,id:m,needClip:x,zIndex:b}=this.props;if(t)return null;var g=pe("recharts-line",i),y=m,{r:O,strokeWidth:S}=st(a),P=lt(a),E=O*2+S,k=x?"url(#clipPath-".concat(P?"":"dots-").concat(y,")"):void 0;return l.createElement(ot,{zIndex:b},l.createElement(ct,{className:g},x&&l.createElement("defs",null,l.createElement(dt,{clipPathId:y,xAxisId:s,yAxisId:c}),!P&&l.createElement("clipPath",{id:"clipPath-dots-".concat(y)},l.createElement("rect",{x:o-E/2,y:d-E/2,width:u+E,height:p+E}))),l.createElement(ut,{xAxisId:s,yAxisId:c,data:r,dataPointFormatter:ya,errorBarOffset:0},l.createElement(ga,{props:this.props,clipPathId:y}))),l.createElement(pt,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:k}))}}var De={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:Je.line,type:"linear"};function ja(e){var t=U(e,De),{activeDot:a,animateNewValues:r,animationBegin:i,animationDuration:s,animationEasing:c,connectNulls:d,dot:o,hide:u,isAnimationActive:p,label:m,legendType:x,xAxisId:b,yAxisId:g,id:y}=t,O=ee(t,ia),{needClip:S}=rt(b,g),P=nt(),E=it(),k=ge(),L=fe(F=>aa(F,b,g,k,y));if(E!=="horizontal"&&E!=="vertical"||L==null||P==null)return null;var{height:$,width:R,x:B,y:T}=P;return l.createElement(ba,K({},O,{id:y,connectNulls:d,dot:o,activeDot:a,animateNewValues:r,animationBegin:i,animationDuration:s,animationEasing:c,isAnimationActive:p,hide:u,label:m,legendType:x,xAxisId:b,yAxisId:g,points:L,layout:E,height:$,width:R,left:B,top:T,needClip:S}))}function wa(e){var{layout:t,xAxis:a,yAxis:r,xAxisTicks:i,yAxisTicks:s,dataKey:c,bandSize:d,displayedData:o}=e;return o.map((u,p)=>{var m=be(u,c);if(t==="horizontal"){var x=ie({axis:a,ticks:i,bandSize:d,entry:u,index:p}),b=se(m)?null:r.scale(m);return{x,y:b,value:m,payload:u}}var g=se(m)?null:a.scale(m),y=ie({axis:r,ticks:s,bandSize:d,entry:u,index:p});return g==null||y==null?null:{x:g,y,value:m,payload:u}}).filter(Boolean)}function Pa(e){var t=U(e,De),a=ge();return l.createElement(qe,{id:t.id,type:"line"},r=>l.createElement(l.Fragment,null,l.createElement(et,{legendPayload:da(t)}),l.createElement(ua,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),l.createElement(tt,{type:"line",id:r,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:a}),l.createElement(ja,K({},t,{id:r}))))}var Oe=l.memo(Pa,Xe);Oe.displayName="Line";var Ea=["axis"],Sa=l.forwardRef((e,t)=>l.createElement(jt,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Ea,tooltipPayloadSearcher:wt,categoricalChartProps:e,ref:t}));const Q=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8","#82ca9d"],Na=({questions:e})=>{const t=ke.map(i=>({name:i,value:e.filter(s=>s.difficulty===i).length})).filter(i=>i.value>0),a=e.reduce((i,s)=>(i[s.discipline]=(i[s.discipline]||0)+1,i),{}),r=Object.entries(a).map(([i,s])=>({name:i,value:s})).sort((i,s)=>s.value-i.value);return n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700",children:[n.jsx("h3",{className:"text-sm font-bold text-slate-300 mb-4 text-center",children:"Difficulty Distribution"}),n.jsx("div",{className:"h-64",children:n.jsx(H,{width:"100%",height:"100%",children:n.jsxs(Pt,{children:[n.jsx(Et,{data:t,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",label:({name:i,percent:s})=>`${i} ${(s*100).toFixed(0)}%`,children:t.map((i,s)=>n.jsx(le,{fill:Q[s%Q.length]},`cell-${s}`))}),n.jsx(V,{contentStyle:{backgroundColor:"#1e293b",borderColor:"#334155",color:"#f1f5f9"},itemStyle:{color:"#f1f5f9"}})]})})})]}),n.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700",children:[n.jsx("h3",{className:"text-sm font-bold text-slate-300 mb-4 text-center",children:"Questions by Discipline"}),n.jsx("div",{className:"h-64",children:n.jsx(H,{width:"100%",height:"100%",children:n.jsxs(St,{data:r,layout:"vertical",margin:{top:5,right:30,left:40,bottom:5},children:[n.jsx(Y,{strokeDasharray:"3 3",stroke:"#334155",horizontal:!1}),n.jsx(Z,{type:"number",stroke:"#94a3b8"}),n.jsx(X,{type:"category",dataKey:"name",stroke:"#94a3b8",width:100,tick:{fontSize:10}}),n.jsx(V,{cursor:{fill:"#334155",opacity:.4},contentStyle:{backgroundColor:"#1e293b",borderColor:"#334155",color:"#f1f5f9"}}),n.jsx(Nt,{dataKey:"value",fill:"#82ca9d",radius:[0,4,4,0],children:r.map((i,s)=>n.jsx(le,{fill:Q[s%Q.length]},`cell-${s}`))})]})})})]})]})},Da=({generations:e})=>{const a=[...e].sort((r,i)=>new Date(r.timestamp)-new Date(i.timestamp)).map((r,i)=>({name:`Batch ${i+1}`,date:new Date(r.timestamp).toLocaleDateString(),quality:r.averageQuality||0,cost:(r.estimatedCost||0)*100,tokens:(r.tokensUsed?.input||0)+(r.tokensUsed?.output||0)}));return a.length===0?n.jsx("div",{className:"text-center p-8 text-slate-500",children:"Not enough data to show trends. Generate some questions first!"}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700",children:[n.jsx("h3",{className:"text-sm font-bold text-slate-300 mb-4 text-center",children:"Average Quality Score Trend"}),n.jsx("div",{className:"h-64",children:n.jsx(H,{width:"100%",height:"100%",children:n.jsxs(Sa,{data:a,margin:{top:5,right:30,left:20,bottom:5},children:[n.jsx(Y,{strokeDasharray:"3 3",stroke:"#334155"}),n.jsx(Z,{dataKey:"name",stroke:"#94a3b8",tick:{fontSize:10}}),n.jsx(X,{stroke:"#94a3b8",domain:[0,100]}),n.jsx(V,{contentStyle:{backgroundColor:"#1e293b",borderColor:"#334155",color:"#f1f5f9"},labelStyle:{color:"#94a3b8"}}),n.jsx(je,{}),n.jsx(Oe,{type:"monotone",dataKey:"quality",stroke:"#8884d8",activeDot:{r:8},name:"Avg Quality Score"})]})})})]}),n.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700",children:[n.jsx("h3",{className:"text-sm font-bold text-slate-300 mb-4 text-center",children:"Token Usage & Cost Trend"}),n.jsx("div",{className:"h-64",children:n.jsx(H,{width:"100%",height:"100%",children:n.jsxs(Dt,{data:a,margin:{top:10,right:30,left:0,bottom:0},children:[n.jsx("defs",{children:n.jsxs("linearGradient",{id:"colorTokens",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),n.jsx("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0})]})}),n.jsx(Z,{dataKey:"name",stroke:"#94a3b8",tick:{fontSize:10}}),n.jsx(X,{stroke:"#94a3b8"}),n.jsx(Y,{strokeDasharray:"3 3",stroke:"#334155"}),n.jsx(V,{contentStyle:{backgroundColor:"#1e293b",borderColor:"#334155",color:"#f1f5f9"},labelStyle:{color:"#94a3b8"}}),n.jsx(Ot,{type:"monotone",dataKey:"tokens",stroke:"#82ca9d",fillOpacity:1,fill:"url(#colorTokens)",name:"Total Tokens"})]})})}),n.jsx("p",{className:"text-[10px] text-slate-500 text-center mt-2",children:"* Cost is correlated with token usage."})]})]})},Oa=({questions:e})=>{const[t,a]=l.useState("overview"),[r,i]=l.useState({generations:[]}),s=l.useMemo(()=>At(e),[e]);return l.useEffect(()=>{const c=Ie();i(c)},[e]),!e||e.length===0?null:n.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-lg p-4 mb-4 animate-in fade-in slide-in-from-top-2",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider flex items-center gap-2",children:[n.jsx(A,{name:"bar-chart-2",size:14})," Database Metrics"]}),n.jsxs("div",{className:"flex bg-slate-800 rounded-lg p-1 gap-1",children:[n.jsx("button",{onClick:()=>a("overview"),className:`px-3 py-1 text-[10px] font-bold uppercase rounded transition-colors ${t==="overview"?"bg-indigo-600 text-white":"text-slate-400 hover:text-slate-200"}`,children:"Overview"}),n.jsx("button",{onClick:()=>a("distributions"),className:`px-3 py-1 text-[10px] font-bold uppercase rounded transition-colors ${t==="distributions"?"bg-indigo-600 text-white":"text-slate-400 hover:text-slate-200"}`,children:"Distributions"}),n.jsx("button",{onClick:()=>a("trends"),className:`px-3 py-1 text-[10px] font-bold uppercase rounded transition-colors ${t==="trends"?"bg-indigo-600 text-white":"text-slate-400 hover:text-slate-200"}`,children:"Trends"})]})]}),n.jsxs("div",{className:"min-h-[200px]",children:[t==="overview"&&n.jsxs("div",{className:"animate-in fade-in duration-300",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[n.jsxs("div",{className:"bg-slate-800 p-3 rounded border border-slate-700",children:[n.jsx("div",{className:"text-2xl font-bold text-white",children:s.total}),n.jsx("div",{className:"text-[10px] text-slate-400 uppercase",children:"Total Questions"})]}),n.jsxs("div",{className:"bg-slate-800 p-3 rounded border border-slate-700",children:[n.jsx("div",{className:"text-2xl font-bold text-indigo-400",children:s.avgQuality}),n.jsx("div",{className:"text-[10px] text-slate-400 uppercase",children:"Avg Quality"})]}),n.jsxs("div",{className:"bg-slate-800 p-3 rounded border border-slate-700",children:[n.jsx("div",{className:"text-2xl font-bold text-emerald-400",children:s.byType["Multiple Choice"]}),n.jsx("div",{className:"text-[10px] text-slate-400 uppercase",children:"Multiple Choice"})]}),n.jsxs("div",{className:"bg-slate-800 p-3 rounded border border-slate-700",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-400",children:s.byType["True/False"]}),n.jsx("div",{className:"text-[10px] text-slate-400 uppercase",children:"True/False"})]})]}),n.jsx("div",{className:"space-y-3",children:n.jsxs("div",{children:[n.jsx("div",{className:"flex justify-between text-[10px] text-slate-400 mb-1 uppercase font-bold",children:n.jsx("span",{children:"Difficulty Distribution"})}),n.jsxs("div",{className:"flex h-2 rounded-full overflow-hidden bg-slate-800",children:[n.jsx("div",{className:"bg-green-500",style:{width:`${s.byDifficulty.Easy/s.total*100}%`},title:`Easy: ${s.byDifficulty.Easy}`}),n.jsx("div",{className:"bg-yellow-500",style:{width:`${s.byDifficulty.Medium/s.total*100}%`},title:`Medium: ${s.byDifficulty.Medium}`}),n.jsx("div",{className:"bg-red-500",style:{width:`${s.byDifficulty.Hard/s.total*100}%`},title:`Hard: ${s.byDifficulty.Hard}`})]}),n.jsxs("div",{className:"flex justify-between text-[10px] text-slate-500 mt-1",children:[n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"})," Easy"]}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500"})," Medium"]}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"})," Hard"]})]})]})})]}),t==="distributions"&&n.jsx("div",{className:"animate-in fade-in duration-300",children:n.jsx(Na,{questions:e})}),t==="trends"&&n.jsx("div",{className:"animate-in fade-in duration-300",children:n.jsx(Da,{generations:r.generations})})]})]})},ka=({questions:e,sheetUrl:t,onLoad:a,onLoadFirestore:r,onClearView:i,onHardReset:s,onUpdateQuestion:c,onKickBack:d,isProcessing:o,showMessage:u,filterMode:p="all"})=>{const[m,x]=l.useState(!1),[b,g]=l.useState(0),[y,O]=l.useState("default"),[S,P]=l.useState(!1),[E,k]=l.useState(!1),L=l.useRef(null),$=l.useRef(null);l.useEffect(()=>{const h=f=>{L.current&&!L.current.contains(f.target)&&P(!1),$.current&&!$.current.contains(f.target)&&k(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const R=l.useMemo(()=>{if(!e)return[];let h=e;p==="accepted"?h=h.filter(v=>v.status==="accepted"):p==="rejected"?h=h.filter(v=>v.status==="rejected"):p==="pending"&&(h=h.filter(v=>!v.status||v.status==="pending"));const f=[...h];switch(y){case"newest":return f.sort((j,w)=>{const D=j.createdAt||j.id||0;return(w.createdAt||w.id||0)-D});case"oldest":return f.sort((j,w)=>{const D=j.createdAt||j.id||0,N=w.createdAt||w.id||0;return D-N});case"language":return f.sort((j,w)=>(j.language||"English").localeCompare(w.language||"English"));case"discipline":return f.sort((j,w)=>(j.discipline||"").localeCompare(w.discipline||""));case"difficulty":const v={Easy:1,Medium:2,Hard:3};return f.sort((j,w)=>(v[j.difficulty]||0)-(v[w.difficulty]||0));case"default":default:return f}},[e,y,p]),B=l.useMemo(()=>{if(!e)return new Map;const h=new Map;return e.forEach(f=>{f.uniqueId&&(h.has(f.uniqueId)||h.set(f.uniqueId,new Set),h.get(f.uniqueId).add(f.language||"English"))}),h},[e]),T=l.useMemo(()=>{if(!e)return new Map;const h=new Map;return e.forEach(f=>{if(!f.uniqueId)return;const v=`${f.uniqueId}::${f.language||"English"}`;h.set(v,f)}),h},[e]),F=(h,f)=>{if(!h.uniqueId){u("Cannot switch: Question has no unique ID for linking translations.");return}const v=`${h.uniqueId}::${f}`,j=T.get(v);if(j){const w=R.findIndex(D=>D.id===j.id);if(w!==-1){const D=document.querySelector(`[data-question-index="${w}"]`);D&&(D.scrollIntoView({behavior:"smooth",block:"center"}),D.classList.add("ring-2","ring-green-500"),setTimeout(()=>D.classList.remove("ring-2","ring-green-500"),2e3)),u(`Scrolled to ${f} version.`)}}else u(`${f} version not found in current view. Try using "Sort by Language" to find it.`)},W=()=>{window.confirm(`âš ï¸ WARNING: HARD RESET âš ï¸

This will PERMANENTLY DELETE ALL questions from:
â€¢ Your Google Spreadsheet (Master_DB)
â€¢ Firestore Database (Cloud)
â€¢ Your local view

PRESERVED: API Key, Sheet URL, Analytics (usage/cost)

This action CANNOT be undone. Continue?`)&&window.confirm(`ðŸ”´ FINAL CONFIRMATION ðŸ”´

Type 'DELETE' in the next prompt to confirm.

Click OK to proceed to final confirmation.`)&&(window.prompt("Type DELETE to confirm permanent deletion:")==="DELETE"?(ze(t),s()):alert("Hard reset cancelled. You did not type 'DELETE'."))},z=async()=>{if(console.log("Sync button clicked. Questions:",e?.length),!e||e.length===0){console.warn("No questions to sync."),alert("No questions loaded to sync.");return}if(!window.confirm(`Sync ${e.length} questions to Firestore? This will overwrite existing documents with the same ID.`)){console.log("Sync cancelled by user.");return}console.log("Starting sync..."),x(!0),g(0);let h=0;try{for(let v=0;v<e.length;v+=10){const j=e.slice(v,v+10);console.log(`Syncing chunk ${v/10+1}, size: ${j.length}`),await Promise.all(j.map(w=>Te(w))),h+=j.length,g(Math.round(h/e.length*100))}console.log("Sync complete."),alert(`Successfully synced ${h} questions to Firestore!`)}catch(f){console.error("Sync failed:",f),alert(`Sync failed: ${f.message}`)}finally{x(!1),g(0)}};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center bg-blue-900/20 p-4 rounded border border-blue-800/50",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-lg font-bold text-blue-400 flex items-center gap-2",children:[n.jsx(A,{name:"database"})," Database View"]}),n.jsxs("p",{className:"text-xs text-blue-300/70",children:["Viewing ",R.length," of ",e.length," questions from Google Sheets (Read Only)"]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-4 bg-slate-900/50 p-1.5 rounded border border-slate-700",children:[n.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:"Sort By:"}),n.jsxs("select",{value:y,onChange:h=>O(h.target.value),className:"bg-slate-800 text-slate-200 text-xs border border-slate-600 rounded px-2 py-1 outline-none focus:border-blue-500",children:[n.jsx("option",{value:"default",children:"Default (Sheet Order)"}),n.jsx("option",{value:"newest",children:"Newest First"}),n.jsx("option",{value:"oldest",children:"Oldest First"}),n.jsx("option",{value:"language",children:"Language (A-Z)"}),n.jsx("option",{value:"discipline",children:"Discipline (A-Z)"}),n.jsx("option",{value:"difficulty",children:"Difficulty (Easy-Hard)"})]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("div",{className:"relative",ref:$,children:[n.jsxs("button",{onClick:()=>k(!E),disabled:o,className:"px-3 py-1 bg-blue-800 hover:bg-blue-700 text-blue-200 text-xs rounded border border-blue-600 flex items-center gap-2 disabled:opacity-50",children:[n.jsx(A,{name:"download",size:12,className:o?"animate-pulse":""}),"Load Data",n.jsx(A,{name:"chevron-down",size:10,className:`transition-transform ${E?"rotate-180":""}`})]}),E&&n.jsx("div",{className:"absolute left-0 top-full mt-1 w-56 bg-slate-800 border border-slate-700 rounded-lg shadow-xl z-50 overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:n.jsxs("div",{className:"py-1",children:[n.jsxs("button",{onClick:()=>{r(),k(!1)},disabled:o,className:"w-full text-left px-4 py-2 text-xs text-indigo-300 hover:bg-slate-700 flex items-center gap-2 disabled:opacity-50",children:[n.jsx(A,{name:"cloud-lightning",size:14}),"From Firestore"]}),n.jsxs("button",{onClick:()=>{a(),k(!1)},disabled:o,className:"w-full text-left px-4 py-2 text-xs text-blue-300 hover:bg-slate-700 flex items-center gap-2 disabled:opacity-50",children:[n.jsx(A,{name:"refresh-cw",size:14}),"From Google Sheets"]})]})})]}),n.jsxs("div",{className:"relative",ref:L,children:[n.jsxs("button",{onClick:()=>P(!S),className:"px-3 py-1 bg-slate-700 hover:bg-slate-600 text-slate-200 text-xs rounded border border-slate-600 flex items-center gap-2",children:[n.jsx(A,{name:"settings",size:12}),"Options",n.jsx(A,{name:"chevron-down",size:10,className:`transition-transform ${S?"rotate-180":""}`})]}),S&&n.jsx("div",{className:"absolute right-0 top-full mt-1 w-56 bg-slate-800 border border-slate-700 rounded-lg shadow-xl z-50 overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:n.jsxs("div",{className:"py-1",children:[n.jsx("button",{onClick:()=>{z(),P(!1)},disabled:m||e.length===0,className:"w-full text-left px-4 py-2 text-xs text-orange-300 hover:bg-slate-700 flex items-center gap-2 disabled:opacity-50",children:m?n.jsxs(n.Fragment,{children:[n.jsx(A,{name:"loader",size:14,className:"animate-spin"})," Syncing ",b,"%"]}):n.jsxs(n.Fragment,{children:[n.jsx(A,{name:"upload-cloud",size:14})," Sync to Firestore"]})}),n.jsx("div",{className:"border-t border-slate-700 my-1"}),n.jsxs("button",{onClick:()=>{i(),P(!1)},className:"w-full text-left px-4 py-2 text-xs text-red-300 hover:bg-slate-700 flex items-center gap-2",children:[n.jsx(A,{name:"trash-2",size:14})," Clear View"]}),n.jsxs("button",{onClick:()=>{W(),P(!1)},className:"w-full text-left px-4 py-2 text-xs text-red-400 hover:bg-red-900/30 flex items-center gap-2 font-bold",children:[n.jsx(A,{name:"alert-triangle",size:14})," HARD RESET (Danger!)"]})]})})]})]})]}),n.jsx(Oa,{questions:e}),R.length===0?n.jsx("div",{className:"text-center py-10 text-slate-500",children:"No questions loaded from database. Click Refresh."}):R.map((h,f)=>n.jsx("div",{"data-question-index":f,className:"opacity-75 hover:opacity-100 transition-all",children:n.jsx(Le,{q:h,onUpdateStatus:()=>{},onExplain:()=>{},onVariate:()=>{},onCritique:()=>{},onTranslateSingle:()=>{},onSwitchLanguage:v=>F(h,v),onDelete:()=>{},onUpdateQuestion:c,onKickBack:d,availableLanguages:B.get(h.uniqueId),isProcessing:!1,appMode:"database",showMessage:u})},f))]})};export{ka as default};

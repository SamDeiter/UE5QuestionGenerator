import{r as o,a as ht,C as gt,j as l,b as yt,I as M,Q as bt,s as xt,c as Pt}from"./index-CE4Atem4.js";import{r as H,c as X,a as We,S as jt,b as At,u as G,s as Et,d as Ot,e as wt,f as St,g as Dt,h as Nt,i as pe,j as be,k as It,l as De,m as kt,n as C,p as J,o as Ct,q as Tt,t as F,v as Lt,w as Rt,x as Ve,y as $t,z as _t,A as z,B as Mt,C as Kt,D as zt,E as Bt,F as le,G as Ft,H as Wt,I as Vt,J as Gt,K as Qt,L as Ht,M as oe,N as Ut,O as xe,P as Pe,R as Ge,Q as Yt,T as Qe,U as Zt,V as Q,Z as je,W as ae,X as He,Y as Ue,_ as Ye,$ as Xt,a0 as V,a1 as te,a2 as fe,a3 as Jt,a4 as qt,a5 as ea,a6 as ta,a7 as aa,a8 as ra,a9 as na,aa as ia,ab as la,ac as Ze,ad as Xe,ae as oa,af as Y,ag as Ne,ah as sa,ai as ca,aj as Je,ak as qe,al as da,am as ua,an as pa,ao as Ie,ap as fa,aq as et,ar as ma,as as va,at as ha,au as ga,av as ya,aw as ba,ax as xa,ay as Pa,az as ja,aA as Aa,aB as ke,aC as Ce,aD as Ea,aE as Oa,aF as wa,aG as Sa,aH as tt,aI as Da,aJ as Na,aK as Ia,aL as ka,aM as Ca,aN as Ta,aO as re,aP as ne,aQ as La,aR as me,aS as ve,aT as he,aU as Ra,aV as $a,aW as _a}from"./AreaChart-9KWOaOJN.js";const Ma=e=>{if(!e||e.length===0)return{total:0,byDifficulty:{Easy:0,Medium:0,Hard:0},byType:{"Multiple Choice":0,"True/False":0},byDiscipline:{},avgQuality:0};const t={total:e.length,byDifficulty:{Easy:0,Medium:0,Hard:0},byType:{"Multiple Choice":0,"True/False":0},byDiscipline:{},totalQuality:0,ratedCount:0};return e.forEach(a=>{t.byDifficulty[a.difficulty]!==void 0&&t.byDifficulty[a.difficulty]++,t.byType[a.type]!==void 0&&t.byType[a.type]++,t.byDiscipline[a.discipline]||(t.byDiscipline[a.discipline]=0),t.byDiscipline[a.discipline]++;const r=parseFloat(a.critiqueScore||a.initialQuality);isNaN(r)||(t.totalQuality+=r,t.ratedCount++)}),t.avgQuality=t.ratedCount>0?(t.totalQuality/t.ratedCount).toFixed(1):0,t};function ie(){return ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ie.apply(null,arguments)}function Te(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function Ka(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Te(Object(a),!0).forEach(function(r){za(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Te(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function za(e,t,a){return(t=Ba(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Ba(e){var t=Fa(e,"string");return typeof t=="symbol"?t:t+""}function Fa(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var R=32,Wa={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function Va(e){var{data:t,iconType:a,inactiveColor:r}=e,n=R/2,i=R/6,s=R/3,c=t.inactive?r:t.color,d=a??t.type;if(d==="none")return null;if(d==="plainline"){var u;return o.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:(u=t.payload)===null||u===void 0?void 0:u.strokeDasharray,x1:0,y1:n,x2:R,y2:n,className:"recharts-legend-icon"})}if(d==="line")return o.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(n,"h").concat(s,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*s,",").concat(n,`
            H`).concat(R,"M").concat(2*s,",").concat(n,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(s,",").concat(n),className:"recharts-legend-icon"});if(d==="rect")return o.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(R/8,"h").concat(R,"v").concat(R*3/4,"h").concat(-R,"z"),className:"recharts-legend-icon"});if(o.isValidElement(t.legendIcon)){var p=Ka({},t);return delete p.legendIcon,o.cloneElement(t.legendIcon,p)}return o.createElement(At,{fill:c,cx:n,cy:n,size:R,sizeType:"diameter",type:d})}function Ga(e){var{payload:t,iconSize:a,layout:r,formatter:n,inactiveColor:i,iconType:s}=e,c={x:0,y:0,width:R,height:R},d={display:r==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((p,m)=>{var f=p.formatter||n,y=X({"recharts-legend-item":!0,["legend-item-".concat(m)]:!0,inactive:p.inactive});if(p.type==="none")return null;var b=p.inactive?i:p.color,P=f?f(p.value,p,m):p.value;return o.createElement("li",ie({className:y,style:d,key:"legend-item-".concat(m)},We(e,p,m)),o.createElement(jt,{width:a,height:a,viewBox:c,style:u,"aria-label":"".concat(P," legend icon")},o.createElement(Va,{data:p,iconType:s,inactiveColor:i})),o.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},P))})}var Qa=e=>{var t=H(e,Wa),{payload:a,layout:r,align:n}=t;if(!a||!a.length)return null;var i={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return o.createElement("ul",{className:"recharts-default-legend",style:i},o.createElement(Ga,ie({},t,{payload:a})))};function Ha(){return G(Et)}var Ua=["contextPayload"];function ge(){return ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ge.apply(null,arguments)}function Le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function U(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Le(Object(a),!0).forEach(function(r){Ya(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Le(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Ya(e,t,a){return(t=Za(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Za(e){var t=Xa(e,"string");return typeof t=="symbol"?t:t+""}function Xa(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ja(e,t){if(e==null)return{};var a,r,n=qa(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function qa(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}function er(e){return e.value}function tr(e){var{contextPayload:t}=e,a=Ja(e,Ua),r=kt(t,e.payloadUniqBy,er),n=U(U({},a),{},{payload:r});return o.isValidElement(e.content)?o.cloneElement(e.content,n):typeof e.content=="function"?o.createElement(e.content,n):o.createElement(Qa,n)}function ar(e,t,a,r,n,i){var{layout:s,align:c,verticalAlign:d}=t,u,p;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(c==="center"&&s==="vertical"?u={left:((r||0)-i.width)/2}:u=c==="right"?{right:a&&a.right||0}:{left:a&&a.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(d==="middle"?p={top:((n||0)-i.height)/2}:p=d==="bottom"?{bottom:a&&a.bottom||0}:{top:a&&a.top||0}),U(U({},u),p)}function rr(e){var t=be();return o.useEffect(()=>{t(It(e))},[t,e]),null}function nr(e){var t=be();return o.useEffect(()=>(t(De(e)),()=>{t(De({width:0,height:0}))}),[t,e]),null}function ir(e,t,a,r){return e==="vertical"&&pe(t)?{height:t}:e==="horizontal"?{width:a||r}:null}var lr={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function at(e){var t=H(e,lr),a=Ha(),r=Ot(),n=wt(),{width:i,height:s,wrapperStyle:c,portal:d}=t,[u,p]=St([a]),m=Dt(),f=Nt();if(m==null||f==null)return null;var y=m-(n?.left||0)-(n?.right||0),b=ir(t.layout,s,i,y),P=d?c:U(U({position:"absolute",width:b?.width||i||"auto",height:b?.height||s||"auto"},ar(c,t,n,m,f,u)),c),E=d??r;if(E==null||a==null)return null;var h=o.createElement("div",{className:"recharts-legend-wrapper",style:P,ref:p},o.createElement(rr,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!d&&o.createElement(nr,{width:u.width,height:u.height}),o.createElement(tr,ge({},t,b,{margin:n,chartWidth:m,chartHeight:f,contextPayload:a})));return ht.createPortal(h,E)}at.displayName="Legend";var rt=e=>e.graphicalItems.polarItems,or=C([J,Ct],Tt),se=C([rt,F,or],Lt),sr=C([se],Rt),ce=C([sr,Ve],$t),cr=C([ce,F,se],_t);C([ce,F,se],(e,t,a)=>a.length>0?e.flatMap(r=>a.flatMap(n=>{var i,s=z(r,(i=t.dataKey)!==null&&i!==void 0?i:n.dataKey);return{value:s,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(r=>({value:z(r,t.dataKey),errorDomain:[]})):e.map(r=>({value:r,errorDomain:[]})));var Re=()=>{},dr=C([ce,F,se,Mt,J],Kt),ur=C([F,zt,Bt,Re,dr,Re,le,J],Ft),nt=C([F,le,ce,cr,Wt,J,ur],Vt),pr=C([nt,F,Gt],Qt);C([F,nt,pr,J],Ht);function $e(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function _e(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?$e(Object(a),!0).forEach(function(r){fr(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$e(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function fr(e,t,a){return(t=mr(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function mr(e){var t=vr(e,"string");return typeof t=="symbol"?t:t+""}function vr(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hr=(e,t)=>t,Ae=C([rt,hr],(e,t)=>e.filter(a=>a.type==="pie").find(a=>a.id===t)),gr=[],Ee=(e,t,a)=>a?.length===0?gr:a,it=C([Ve,Ae,Ee],(e,t,a)=>{var{chartData:r}=e;if(t!=null){var n;if(t?.data!=null&&t.data.length>0?n=t.data:n=r,(!n||!n.length)&&a!=null&&(n=a.map(i=>_e(_e({},t.presentationProps),i.props))),n!=null)return n}}),yr=C([it,Ae,Ee],(e,t,a)=>{if(!(e==null||t==null))return e.map((r,n)=>{var i,s=z(r,t.nameKey,t.name),c;return a!=null&&(i=a[n])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?c=a[n].props.fill:typeof r=="object"&&r!=null&&"fill"in r?c=r.fill:c=t.fill,{value:oe(s,t.dataKey),color:c,payload:r,type:t.legendType}})}),br=C([it,Ae,Ee,Ut],(e,t,a,r)=>{if(!(t==null||e==null))return zr({offset:r,pieSettings:t,displayedData:e,cells:a})}),xr=["key"],Pr=["onMouseEnter","onClick","onMouseLeave"],jr=["id"],Ar=["id"];function Me(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Me(Object(a),!0).forEach(function(r){Er(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Me(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Er(e,t,a){return(t=Or(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Or(e){var t=wr(e,"string");return typeof t=="symbol"?t:t+""}function wr(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},B.apply(null,arguments)}function de(e,t){if(e==null)return{};var a,r,n=Sr(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function Sr(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}function Dr(e){var t=o.useMemo(()=>Qe(e.children,ae),[e.children]),a=G(r=>yr(r,e.id,t));return a==null?null:o.createElement(Zt,{legendPayload:a})}var Nr=o.memo(e=>{var{dataKey:t,nameKey:a,sectors:r,stroke:n,strokeWidth:i,fill:s,name:c,hide:d,tooltipType:u}=e,p={dataDefinedOnItem:r.map(m=>m.tooltipPayload),positions:r.map(m=>m.tooltipPosition),settings:{stroke:n,strokeWidth:i,fill:s,dataKey:t,nameKey:a,name:oe(c,t),hide:d,type:u,color:s,unit:""}};return o.createElement(He,{tooltipEntrySettings:p})}),Ir=(e,t)=>e>t?"start":e<t?"end":"middle",kr=(e,t,a)=>typeof t=="function"?Y(t(e),a,a*.8):Y(t,a,a*.8),Cr=(e,t,a)=>{var{top:r,left:n,width:i,height:s}=t,c=oa(i,s),d=n+Y(e.cx,i,i/2),u=r+Y(e.cy,s,s/2),p=Y(e.innerRadius,c,0),m=kr(a,e.outerRadius,c),f=e.maxRadius||Math.sqrt(i*i+s*s)/2;return{cx:d,cy:u,innerRadius:p,outerRadius:m,maxRadius:f}},Tr=(e,t)=>{var a=te(t-e),r=Math.min(Math.abs(t-e),360);return a*r};function Lr(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var Rr=(e,t)=>{if(o.isValidElement(e))return o.cloneElement(e,t);if(typeof e=="function")return e(t);var a=X("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:r}=t,n=de(t,xr);return o.createElement(sa,B({},n,{type:"linear",className:a}))},$r=(e,t,a)=>{if(o.isValidElement(e))return o.cloneElement(e,t);var r=a;if(typeof e=="function"&&(r=e(t),o.isValidElement(r)))return r;var n=X("recharts-pie-label-text",Lr(e));return o.createElement(ca,B({},t,{alignmentBaseline:"middle",className:n}),r)};function _r(e){var{sectors:t,props:a,showLabels:r}=e,{label:n,labelLine:i,dataKey:s}=a;if(!r||!n||!t)return null;var c=Pe(a),d=Ne(n),u=Ne(i),p=typeof n=="object"&&"offsetRadius"in n&&typeof n.offsetRadius=="number"&&n.offsetRadius||20,m=t.map((f,y)=>{var b=(f.startAngle+f.endAngle)/2,P=fe(f.cx,f.cy,f.outerRadius+p,b),E=S(S(S(S({},c),f),{},{stroke:"none"},d),{},{index:y,textAnchor:Ir(P.x,f.cx)},P),h=S(S(S(S({},c),f),{},{fill:"none",stroke:f.fill},u),{},{index:y,points:[fe(f.cx,f.cy,f.outerRadius,b),P],key:"line"});return o.createElement(je,{zIndex:xe.label,key:"label-".concat(f.startAngle,"-").concat(f.endAngle,"-").concat(f.midAngle,"-").concat(y)},o.createElement(Q,null,i&&Rr(i,h),$r(n,E,z(f,s))))});return o.createElement(Q,{className:"recharts-pie-labels"},m)}function Mr(e){var{sectors:t,props:a,showLabels:r}=e,{label:n}=a;return typeof n=="object"&&n!=null&&"position"in n?o.createElement(Xe,{label:n}):o.createElement(_r,{sectors:t,props:a,showLabels:r})}function Kr(e){var{sectors:t,activeShape:a,inactiveShape:r,allOtherPieProps:n,shape:i,id:s}=e,c=G(qt),d=G(ea),u=G(ta),{onMouseEnter:p,onClick:m,onMouseLeave:f}=n,y=de(n,Pr),b=aa(p,n.dataKey,s),P=ra(f),E=na(m,n.dataKey,s);return t==null||t.length===0?null:o.createElement(o.Fragment,null,t.map((h,A)=>{if(h?.startAngle===0&&h?.endAngle===0&&t.length!==1)return null;var O=u==null||u===s,N=String(A)===c&&(d==null||n.dataKey===d)&&O,T=c?r:null,w=a&&N?a:T,D=S(S({},h),{},{stroke:h.stroke,tabIndex:-1,[la]:A,[ia]:n.dataKey});return o.createElement(Q,B({key:"sector-".concat(h?.startAngle,"-").concat(h?.endAngle,"-").concat(h.midAngle,"-").concat(A),tabIndex:-1,className:"recharts-pie-sector"},We(y,h,A),{onMouseEnter:b(h,A),onMouseLeave:P(h,A),onClick:E(h,A)}),o.createElement(Ze,B({option:i??w,index:A,shapeType:"sector",isActive:N},D)))}))}function zr(e){var t,{pieSettings:a,displayedData:r,cells:n,offset:i}=e,{cornerRadius:s,startAngle:c,endAngle:d,dataKey:u,nameKey:p,tooltipType:m}=a,f=Math.abs(a.minAngle),y=Tr(c,d),b=Math.abs(y),P=r.length<=1?0:(t=a.paddingAngle)!==null&&t!==void 0?t:0,E=r.filter(w=>z(w,u,0)!==0).length,h=(b>=360?E:E-1)*P,A=b-E*f-h,O=r.reduce((w,D)=>{var I=z(D,u,0);return w+(pe(I)?I:0)},0),N;if(O>0){var T;N=r.map((w,D)=>{var I=z(w,u,0),v=z(w,p,D),g=Cr(a,i,w),j=(pe(I)?I:0)/O,x,L=S(S({},w),n&&n[D]&&n[D].props);D?x=T.endAngle+te(y)*P*(I!==0?1:0):x=c;var k=x+te(y)*((I!==0?f:0)+j*A),_=(x+k)/2,W=(g.innerRadius+g.outerRadius)/2,ue=[{name:v,value:I,payload:L,dataKey:u,type:m}],q=fe(g.cx,g.cy,W,_);return T=S(S(S(S({},a.presentationProps),{},{percent:j,cornerRadius:typeof s=="string"?parseFloat(s):s,name:v,tooltipPayload:ue,midAngle:_,middleRadius:W,tooltipPosition:q},L),g),{},{value:I,dataKey:u,startAngle:x,endAngle:k,payload:L,paddingAngle:te(y)*P}),T})}return N}function Br(e){var{showLabels:t,sectors:a,children:r}=e,n=o.useMemo(()=>!t||!a?[]:a.map(i=>({value:i.value,payload:i.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:i.cx,cy:i.cy,innerRadius:i.innerRadius,outerRadius:i.outerRadius,startAngle:i.startAngle,endAngle:i.endAngle,clockWise:!1},fill:i.fill})),[a,t]);return o.createElement(Jt,{value:t?n:void 0},r)}function Fr(e){var{props:t,previousSectorsRef:a,id:r}=e,{sectors:n,isAnimationActive:i,animationBegin:s,animationDuration:c,animationEasing:d,activeShape:u,inactiveShape:p,onAnimationStart:m,onAnimationEnd:f}=t,y=Ue(t,"recharts-pie-"),b=a.current,[P,E]=o.useState(!1),h=o.useCallback(()=>{typeof f=="function"&&f(),E(!1)},[f]),A=o.useCallback(()=>{typeof m=="function"&&m(),E(!0)},[m]);return o.createElement(Br,{showLabels:!P,sectors:n},o.createElement(Ye,{animationId:y,begin:s,duration:c,isActive:i,easing:d,onAnimationStart:A,onAnimationEnd:h,key:y},O=>{var N=[],T=n&&n[0],w=T?.startAngle;return n?.forEach((D,I)=>{var v=b&&b[I],g=I>0?Xt(D,"paddingAngle",0):0;if(v){var j=V(v.endAngle-v.startAngle,D.endAngle-D.startAngle,O),x=S(S({},D),{},{startAngle:w+g,endAngle:w+j+g});N.push(x),w=x.endAngle}else{var{endAngle:L,startAngle:k}=D,_=V(0,L-k,O),W=S(S({},D),{},{startAngle:w+g,endAngle:w+_+g});N.push(W),w=W.endAngle}}),a.current=N,o.createElement(Q,null,o.createElement(Kr,{sectors:N,activeShape:u,inactiveShape:p,allOtherPieProps:t,shape:t.shape,id:r}))}),o.createElement(Mr,{showLabels:!P,sectors:n,props:t}),t.children)}var Wr={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:xe.area};function Vr(e){var{id:t}=e,a=de(e,jr),{hide:r,className:n,rootTabIndex:i}=e,s=o.useMemo(()=>Qe(e.children,ae),[e.children]),c=G(p=>br(p,t,s)),d=o.useRef(null),u=X("recharts-pie",n);return r||c==null?(d.current=null,o.createElement(Q,{tabIndex:i,className:u})):o.createElement(je,{zIndex:e.zIndex},o.createElement(Nr,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:c,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType}),o.createElement(Q,{tabIndex:i,className:u},o.createElement(Fr,{props:S(S({},a),{},{sectors:c}),previousSectorsRef:d,id:t})))}function lt(e){var t=H(e,Wr),{id:a}=t,r=de(t,Ar),n=Pe(r);return o.createElement(Ge,{id:a,type:"pie"},i=>o.createElement(o.Fragment,null,o.createElement(Yt,{type:"pie",id:i,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:n,maxRadius:t.maxRadius}),o.createElement(Dr,B({},r,{id:i})),o.createElement(Vr,B({},r,{id:i}))))}lt.displayName="Pie";var ot=(e,t,a,r)=>Je(e,"xAxis",t,r),st=(e,t,a,r)=>qe(e,"xAxis",t,r),ct=(e,t,a,r)=>Je(e,"yAxis",a,r),dt=(e,t,a,r)=>qe(e,"yAxis",a,r),Gr=C([le,ot,ct,st,dt],(e,t,a,r,n)=>pa(e,"xAxis")?Ie(t,r,!1):Ie(a,n,!1)),Qr=(e,t,a,r,n)=>n;function Hr(e){return e.type==="line"}var Ur=C([ua,Qr],(e,t)=>e.filter(Hr).find(a=>a.id===t)),Yr=C([le,ot,ct,st,dt,Ur,Gr,da],(e,t,a,r,n,i,s,c)=>{var{chartData:d,dataStartIndex:u,dataEndIndex:p}=c;if(!(i==null||t==null||a==null||r==null||n==null||r.length===0||n.length===0||s==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:m,data:f}=i,y;if(f!=null&&f.length>0?y=f:y=d?.slice(u,p+1),y!=null)return hn({layout:e,xAxis:t,yAxis:a,xAxisTicks:r,yAxisTicks:n,dataKey:m,bandSize:s,displayedData:y})}}),Zr=["id"],Xr=["type","layout","connectNulls","needClip","shape"],Jr=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Z(){return Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Z.apply(null,arguments)}function Ke(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function K(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Ke(Object(a),!0).forEach(function(r){qr(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ke(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function qr(e,t,a){return(t=en(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function en(e){var t=tn(e,"string");return typeof t=="symbol"?t:t+""}function tn(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Oe(e,t){if(e==null)return{};var a,r,n=an(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function an(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var rn=e=>{var{dataKey:t,name:a,stroke:r,legendType:n,hide:i}=e;return[{inactive:i,dataKey:t,type:n,color:r,value:oe(a,t),payload:e}]},nn=o.memo(e=>{var{dataKey:t,data:a,stroke:r,strokeWidth:n,fill:i,name:s,hide:c,unit:d,tooltipType:u}=e,p={dataDefinedOnItem:a,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:i,dataKey:t,nameKey:void 0,name:oe(s,t),hide:c,type:u,color:r,unit:d}};return o.createElement(He,{tooltipEntrySettings:p})}),ut=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function ln(e,t){for(var a=e.length%2!==0?[...e,0]:e,r=[],n=0;n<t;++n)r=[...r,...a];return r}var on=(e,t,a)=>{var r=a.reduce((m,f)=>m+f);if(!r)return ut(t,e);for(var n=Math.floor(e/r),i=e%r,s=t-e,c=[],d=0,u=0;d<a.length;u+=a[d],++d)if(u+a[d]>i){c=[...a.slice(0,d),i-u];break}var p=c.length%2===0?[0,s]:[s];return[...ln(a,n),...c,...p].map(m=>"".concat(m,"px")).join(", ")};function sn(e){var{clipPathId:t,points:a,props:r}=e,{dot:n,dataKey:i,needClip:s}=r,{id:c}=r,d=Oe(r,Zr),u=Pe(d);return o.createElement(wa,{points:a,dot:n,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:i,baseProps:u,needClip:s,clipPathId:t})}function cn(e){var{showLabels:t,children:a,points:r}=e,n=o.useMemo(()=>r?.map(i=>{var s,c,d={x:(s=i.x)!==null&&s!==void 0?s:0,y:(c=i.y)!==null&&c!==void 0?c:0,width:0,lowerWidth:0,upperWidth:0,height:0};return K(K({},d),{},{value:i.value,payload:i.payload,viewBox:d,parentViewBox:void 0,fill:void 0})}),[r]);return o.createElement(Ea,{value:t?n:void 0},a)}function ze(e){var{clipPathId:t,pathRef:a,points:r,strokeDasharray:n,props:i}=e,{type:s,layout:c,connectNulls:d,needClip:u,shape:p}=i,m=Oe(i,Xr),f=K(K({},Oa(m)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(t,")"):void 0,points:r,type:s,layout:c,connectNulls:d,strokeDasharray:n??i.strokeDasharray});return o.createElement(o.Fragment,null,r?.length>1&&o.createElement(Ze,Z({shapeType:"curve",option:p},f,{pathRef:a})),o.createElement(sn,{points:r,clipPathId:t,props:i}))}function dn(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function un(e){var{clipPathId:t,props:a,pathRef:r,previousPointsRef:n,longestAnimatedLengthRef:i}=e,{points:s,strokeDasharray:c,isAnimationActive:d,animationBegin:u,animationDuration:p,animationEasing:m,animateNewValues:f,width:y,height:b,onAnimationEnd:P,onAnimationStart:E}=a,h=n.current,A=Ue(s,"recharts-line-"),O=o.useRef(A),[N,T]=o.useState(!1),w=!N,D=o.useCallback(()=>{typeof P=="function"&&P(),T(!1)},[P]),I=o.useCallback(()=>{typeof E=="function"&&E(),T(!0)},[E]),v=dn(r.current),g=o.useRef(0);O.current!==A&&(g.current=i.current,O.current=A);var j=g.current;return o.createElement(cn,{points:s,showLabels:w},a.children,o.createElement(Ye,{animationId:A,begin:u,duration:p,isActive:d,easing:m,onAnimationEnd:D,onAnimationStart:I,key:A},x=>{var L=V(j,v+j,x),k=Math.min(L,v),_;if(d)if(c){var W="".concat(c).split(/[,\s]+/gim).map($=>parseFloat($));_=on(k,v,W)}else _=ut(v,k);else _=c==null?void 0:String(c);if(x>0&&v>0&&(n.current=s,i.current=Math.max(i.current,k)),h){var ue=h.length/s.length,q=x===1?s:s.map(($,vt)=>{var we=Math.floor(vt*ue);if(h[we]){var Se=h[we];return K(K({},$),{},{x:V(Se.x,$.x,x),y:V(Se.y,$.y,x)})}return f?K(K({},$),{},{x:V(y*2,$.x,x),y:V(b/2,$.y,x)}):K(K({},$),{},{x:$.x,y:$.y})});return n.current=q,o.createElement(ze,{props:a,points:q,clipPathId:t,pathRef:r,strokeDasharray:_})}return o.createElement(ze,{props:a,points:s,clipPathId:t,pathRef:r,strokeDasharray:_})}),o.createElement(Xe,{label:a.label}))}function pn(e){var{clipPathId:t,props:a}=e,r=o.useRef(null),n=o.useRef(0),i=o.useRef(null);return o.createElement(un,{props:a,clipPathId:t,previousPointsRef:r,longestAnimatedLengthRef:n,pathRef:i})}var fn=(e,t)=>{var a,r;return{x:(a=e.x)!==null&&a!==void 0?a:void 0,y:(r=e.y)!==null&&r!==void 0?r:void 0,value:e.value,errorVal:z(e.payload,t)}};class mn extends o.Component{render(){var{hide:t,dot:a,points:r,className:n,xAxisId:i,yAxisId:s,top:c,left:d,width:u,height:p,id:m,needClip:f,zIndex:y}=this.props;if(t)return null;var b=X("recharts-line",n),P=m,{r:E,strokeWidth:h}=ba(a),A=xa(a),O=E*2+h,N=f?"url(#clipPath-".concat(A?"":"dots-").concat(P,")"):void 0;return o.createElement(je,{zIndex:y},o.createElement(Q,{className:b},f&&o.createElement("defs",null,o.createElement(Pa,{clipPathId:P,xAxisId:i,yAxisId:s}),!A&&o.createElement("clipPath",{id:"clipPath-dots-".concat(P)},o.createElement("rect",{x:d-O/2,y:c-O/2,width:u+O,height:p+O}))),o.createElement(ja,{xAxisId:i,yAxisId:s,data:r,dataPointFormatter:fn,errorBarOffset:0},o.createElement(pn,{props:this.props,clipPathId:P}))),o.createElement(Aa,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:N}))}}var pt={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:xe.line,type:"linear"};function vn(e){var t=H(e,pt),{activeDot:a,animateNewValues:r,animationBegin:n,animationDuration:i,animationEasing:s,connectNulls:c,dot:d,hide:u,isAnimationActive:p,label:m,legendType:f,xAxisId:y,yAxisId:b,id:P}=t,E=Oe(t,Jr),{needClip:h}=ha(y,b),A=ga(),O=ya(),N=et(),T=G(g=>Yr(g,y,b,N,P));if(O!=="horizontal"&&O!=="vertical"||T==null||A==null)return null;var{height:w,width:D,x:I,y:v}=A;return o.createElement(mn,Z({},E,{id:P,connectNulls:c,dot:d,activeDot:a,animateNewValues:r,animationBegin:n,animationDuration:i,animationEasing:s,isAnimationActive:p,hide:u,label:m,legendType:f,xAxisId:y,yAxisId:b,points:T,layout:O,height:w,width:D,left:I,top:v,needClip:h}))}function hn(e){var{layout:t,xAxis:a,yAxis:r,xAxisTicks:n,yAxisTicks:i,dataKey:s,bandSize:c,displayedData:d}=e;return d.map((u,p)=>{var m=z(u,s);if(t==="horizontal"){var f=ke({axis:a,ticks:n,bandSize:c,entry:u,index:p}),y=Ce(m)?null:r.scale(m);return{x:f,y,value:m,payload:u}}var b=Ce(m)?null:a.scale(m),P=ke({axis:r,ticks:i,bandSize:c,entry:u,index:p});return b==null||P==null?null:{x:b,y:P,value:m,payload:u}}).filter(Boolean)}function gn(e){var t=H(e,pt),a=et();return o.createElement(Ge,{id:t.id,type:"line"},r=>o.createElement(o.Fragment,null,o.createElement(ma,{legendPayload:rn(t)}),o.createElement(nn,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),o.createElement(va,{type:"line",id:r,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:a}),o.createElement(vn,Z({},t,{id:r}))))}var ft=o.memo(gn,fa);ft.displayName="Line";var yn=["axis"],bn=o.forwardRef((e,t)=>o.createElement(Sa,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:yn,tooltipPayloadSearcher:tt,categoricalChartProps:e,ref:t}));function xn(e){var t=be();return o.useEffect(()=>{t(Da(e))},[t,e]),null}var Pn=["layout"];function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ye.apply(null,arguments)}function jn(e,t){if(e==null)return{};var a,r,n=An(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function An(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var En={top:5,right:5,bottom:5,left:5},mt={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:En,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},On=o.forwardRef(function(t,a){var r,n=H(t.categoricalChartProps,mt),{layout:i}=n,s=jn(n,Pn),{chartName:c,defaultTooltipEventType:d,validateTooltipEventTypes:u,tooltipPayloadSearcher:p}=t,m={chartName:c,defaultTooltipEventType:d,validateTooltipEventTypes:u,tooltipPayloadSearcher:p,eventEmitter:void 0};return o.createElement(Na,{preloadedState:{options:m},reduxStoreName:(r=n.id)!==null&&r!==void 0?r:c},o.createElement(Ia,{chartData:n.data}),o.createElement(ka,{layout:i,margin:n.margin}),o.createElement(Ca,{baseValue:void 0,accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className,reverseStackOrder:n.reverseStackOrder}),o.createElement(xn,{cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius}),o.createElement(Ta,ye({},s,{ref:a})))});function Be(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function Fe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Be(Object(a),!0).forEach(function(r){wn(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Be(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function wn(e,t,a){return(t=Sn(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Sn(e){var t=Dn(e,"string");return typeof t=="symbol"?t:t+""}function Dn(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Nn=["item"],In=Fe(Fe({},mt),{},{layout:"centric",startAngle:0,endAngle:360}),kn=o.forwardRef((e,t)=>{var a=H(e,In);return o.createElement(On,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Nn,tooltipPayloadSearcher:tt,categoricalChartProps:a,ref:t})});const ee=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8","#82ca9d"],Cn=({questions:e})=>{const t=gt.map(n=>({name:n,value:e.filter(i=>i.difficulty===n).length})).filter(n=>n.value>0),a=e.reduce((n,i)=>(n[i.discipline]=(n[i.discipline]||0)+1,n),{}),r=Object.entries(a).map(([n,i])=>({name:n,value:i})).sort((n,i)=>i.value-n.value);return l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700",children:[l.jsx("h3",{className:"text-sm font-bold text-slate-300 mb-4 text-center",children:"Difficulty Distribution"}),l.jsx("div",{className:"h-64",children:l.jsx(re,{width:"100%",height:"100%",children:l.jsxs(kn,{children:[l.jsx(lt,{data:t,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",label:({name:n,percent:i})=>`${n} ${(i*100).toFixed(0)}%`,children:t.map((n,i)=>l.jsx(ae,{fill:ee[i%ee.length]},`cell-${i}`))}),l.jsx(ne,{contentStyle:{backgroundColor:"#1e293b",borderColor:"#334155",color:"#f1f5f9"},itemStyle:{color:"#f1f5f9"}})]})})})]}),l.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700",children:[l.jsx("h3",{className:"text-sm font-bold text-slate-300 mb-4 text-center",children:"Questions by Discipline"}),l.jsx("div",{className:"h-64",children:l.jsx(re,{width:"100%",height:"100%",children:l.jsxs(La,{data:r,layout:"vertical",margin:{top:5,right:30,left:40,bottom:5},children:[l.jsx(me,{strokeDasharray:"3 3",stroke:"#334155",horizontal:!1}),l.jsx(ve,{type:"number",stroke:"#94a3b8"}),l.jsx(he,{type:"category",dataKey:"name",stroke:"#94a3b8",width:100,tick:{fontSize:10}}),l.jsx(ne,{cursor:{fill:"#334155",opacity:.4},contentStyle:{backgroundColor:"#1e293b",borderColor:"#334155",color:"#f1f5f9"}}),l.jsx(Ra,{dataKey:"value",fill:"#82ca9d",radius:[0,4,4,0],children:r.map((n,i)=>l.jsx(ae,{fill:ee[i%ee.length]},`cell-${i}`))})]})})})]})]})},Tn=({generations:e})=>{const a=[...e].sort((r,n)=>new Date(r.timestamp)-new Date(n.timestamp)).map((r,n)=>({name:`Batch ${n+1}`,date:new Date(r.timestamp).toLocaleDateString(),quality:r.averageQuality||0,cost:(r.estimatedCost||0)*100,tokens:(r.tokensUsed?.input||0)+(r.tokensUsed?.output||0)}));return a.length===0?l.jsx("div",{className:"text-center p-8 text-slate-500",children:"Not enough data to show trends. Generate some questions first!"}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700",children:[l.jsx("h3",{className:"text-sm font-bold text-slate-300 mb-4 text-center",children:"Average Quality Score Trend"}),l.jsx("div",{className:"h-64",children:l.jsx(re,{width:"100%",height:"100%",children:l.jsxs(bn,{data:a,margin:{top:5,right:30,left:20,bottom:5},children:[l.jsx(me,{strokeDasharray:"3 3",stroke:"#334155"}),l.jsx(ve,{dataKey:"name",stroke:"#94a3b8",tick:{fontSize:10}}),l.jsx(he,{stroke:"#94a3b8",domain:[0,100]}),l.jsx(ne,{contentStyle:{backgroundColor:"#1e293b",borderColor:"#334155",color:"#f1f5f9"},labelStyle:{color:"#94a3b8"}}),l.jsx(at,{}),l.jsx(ft,{type:"monotone",dataKey:"quality",stroke:"#8884d8",activeDot:{r:8},name:"Avg Quality Score"})]})})})]}),l.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700",children:[l.jsx("h3",{className:"text-sm font-bold text-slate-300 mb-4 text-center",children:"Token Usage & Cost Trend"}),l.jsx("div",{className:"h-64",children:l.jsx(re,{width:"100%",height:"100%",children:l.jsxs($a,{data:a,margin:{top:10,right:30,left:0,bottom:0},children:[l.jsx("defs",{children:l.jsxs("linearGradient",{id:"colorTokens",x1:"0",y1:"0",x2:"0",y2:"1",children:[l.jsx("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),l.jsx("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0})]})}),l.jsx(ve,{dataKey:"name",stroke:"#94a3b8",tick:{fontSize:10}}),l.jsx(he,{stroke:"#94a3b8"}),l.jsx(me,{strokeDasharray:"3 3",stroke:"#334155"}),l.jsx(ne,{contentStyle:{backgroundColor:"#1e293b",borderColor:"#334155",color:"#f1f5f9"},labelStyle:{color:"#94a3b8"}}),l.jsx(_a,{type:"monotone",dataKey:"tokens",stroke:"#82ca9d",fillOpacity:1,fill:"url(#colorTokens)",name:"Total Tokens"})]})})}),l.jsx("p",{className:"text-[10px] text-slate-500 text-center mt-2",children:"* Cost is correlated with token usage."})]})]})},Ln=({questions:e})=>{const[t,a]=o.useState("overview"),[r,n]=o.useState({generations:[]}),i=o.useMemo(()=>Ma(e),[e]);return o.useEffect(()=>{const s=yt();n(s)},[e]),!e||e.length===0?null:l.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-lg p-4 mb-4 animate-in fade-in slide-in-from-top-2",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider flex items-center gap-2",children:[l.jsx(M,{name:"bar-chart-2",size:14})," Database Metrics"]}),l.jsxs("div",{className:"flex bg-slate-800 rounded-lg p-1 gap-1",children:[l.jsx("button",{onClick:()=>a("overview"),className:`px-3 py-1 text-[10px] font-bold uppercase rounded transition-colors ${t==="overview"?"bg-indigo-600 text-white":"text-slate-400 hover:text-slate-200"}`,children:"Overview"}),l.jsx("button",{onClick:()=>a("distributions"),className:`px-3 py-1 text-[10px] font-bold uppercase rounded transition-colors ${t==="distributions"?"bg-indigo-600 text-white":"text-slate-400 hover:text-slate-200"}`,children:"Distributions"}),l.jsx("button",{onClick:()=>a("trends"),className:`px-3 py-1 text-[10px] font-bold uppercase rounded transition-colors ${t==="trends"?"bg-indigo-600 text-white":"text-slate-400 hover:text-slate-200"}`,children:"Trends"})]})]}),l.jsxs("div",{className:"min-h-[200px]",children:[t==="overview"&&l.jsxs("div",{className:"animate-in fade-in duration-300",children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[l.jsxs("div",{className:"bg-slate-800 p-3 rounded border border-slate-700",children:[l.jsx("div",{className:"text-2xl font-bold text-white",children:i.total}),l.jsx("div",{className:"text-[10px] text-slate-400 uppercase",children:"Total Questions"})]}),l.jsxs("div",{className:"bg-slate-800 p-3 rounded border border-slate-700",children:[l.jsx("div",{className:"text-2xl font-bold text-indigo-400",children:i.avgQuality}),l.jsx("div",{className:"text-[10px] text-slate-400 uppercase",children:"Avg Quality"})]}),l.jsxs("div",{className:"bg-slate-800 p-3 rounded border border-slate-700",children:[l.jsx("div",{className:"text-2xl font-bold text-emerald-400",children:i.byType["Multiple Choice"]}),l.jsx("div",{className:"text-[10px] text-slate-400 uppercase",children:"Multiple Choice"})]}),l.jsxs("div",{className:"bg-slate-800 p-3 rounded border border-slate-700",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-400",children:i.byType["True/False"]}),l.jsx("div",{className:"text-[10px] text-slate-400 uppercase",children:"True/False"})]})]}),l.jsx("div",{className:"space-y-3",children:l.jsxs("div",{children:[l.jsx("div",{className:"flex justify-between text-[10px] text-slate-400 mb-1 uppercase font-bold",children:l.jsx("span",{children:"Difficulty Distribution"})}),l.jsxs("div",{className:"flex h-2 rounded-full overflow-hidden bg-slate-800",children:[l.jsx("div",{className:"bg-green-500",style:{width:`${i.byDifficulty.Easy/i.total*100}%`},title:`Easy: ${i.byDifficulty.Easy}`}),l.jsx("div",{className:"bg-yellow-500",style:{width:`${i.byDifficulty.Medium/i.total*100}%`},title:`Medium: ${i.byDifficulty.Medium}`}),l.jsx("div",{className:"bg-red-500",style:{width:`${i.byDifficulty.Hard/i.total*100}%`},title:`Hard: ${i.byDifficulty.Hard}`})]}),l.jsxs("div",{className:"flex justify-between text-[10px] text-slate-500 mt-1",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"})," Easy"]}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500"})," Medium"]}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"})," Hard"]})]})]})})]}),t==="distributions"&&l.jsx("div",{className:"animate-in fade-in duration-300",children:l.jsx(Cn,{questions:e})}),t==="trends"&&l.jsx("div",{className:"animate-in fade-in duration-300",children:l.jsx(Tn,{generations:r.generations})})]})]})},_n=({questions:e,sheetUrl:t,onLoad:a,onLoadFirestore:r,onClearView:n,onHardReset:i,onUpdateQuestion:s,onKickBack:c,isProcessing:d,showMessage:u})=>{const[p,m]=o.useState(!1),[f,y]=o.useState(0),[b,P]=o.useState("default"),[E,h]=o.useState(!1),A=o.useRef(null);o.useEffect(()=>{const v=g=>{A.current&&!A.current.contains(g.target)&&h(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]);const O=o.useMemo(()=>{if(!e)return[];const v=[...e];switch(b){case"newest":return v.sort((j,x)=>{const L=j.createdAt||j.id||0;return(x.createdAt||x.id||0)-L});case"oldest":return v.sort((j,x)=>{const L=j.createdAt||j.id||0,k=x.createdAt||x.id||0;return L-k});case"language":return v.sort((j,x)=>(j.language||"English").localeCompare(x.language||"English"));case"discipline":return v.sort((j,x)=>(j.discipline||"").localeCompare(x.discipline||""));case"difficulty":const g={Easy:1,Medium:2,Hard:3};return v.sort((j,x)=>(g[j.difficulty]||0)-(g[x.difficulty]||0));case"default":default:return v}},[e,b]),N=o.useMemo(()=>{if(!e)return new Map;const v=new Map;return e.forEach(g=>{g.uniqueId&&(v.has(g.uniqueId)||v.set(g.uniqueId,new Set),v.get(g.uniqueId).add(g.language||"English"))}),v},[e]),T=o.useMemo(()=>{if(!e)return new Map;const v=new Map;return e.forEach(g=>{if(!g.uniqueId)return;const j=`${g.uniqueId}::${g.language||"English"}`;v.set(j,g)}),v},[e]),w=(v,g)=>{if(!v.uniqueId){u("Cannot switch: Question has no unique ID for linking translations.");return}const j=`${v.uniqueId}::${g}`,x=T.get(j);if(x){const L=O.findIndex(k=>k.id===x.id);if(L!==-1){const k=document.querySelector(`[data-question-index="${L}"]`);k&&(k.scrollIntoView({behavior:"smooth",block:"center"}),k.classList.add("ring-2","ring-green-500"),setTimeout(()=>k.classList.remove("ring-2","ring-green-500"),2e3)),u(`Scrolled to ${g} version.`)}}else u(`${g} version not found in current view. Try using "Sort by Language" to find it.`)},D=()=>{window.confirm("ARE YOU SURE? This will permanently DELETE ALL questions from the Cloud Database (Master_DB). This cannot be undone.")&&(Pt(t),i())},I=async()=>{if(console.log("Sync button clicked. Questions:",e?.length),!e||e.length===0){console.warn("No questions to sync."),alert("No questions loaded to sync.");return}if(!window.confirm(`Sync ${e.length} questions to Firestore? This will overwrite existing documents with the same ID.`)){console.log("Sync cancelled by user.");return}console.log("Starting sync..."),m(!0),y(0);let v=0;try{for(let j=0;j<e.length;j+=10){const x=e.slice(j,j+10);console.log(`Syncing chunk ${j/10+1}, size: ${x.length}`),await Promise.all(x.map(L=>xt(L))),v+=x.length,y(Math.round(v/e.length*100))}console.log("Sync complete."),alert(`Successfully synced ${v} questions to Firestore!`)}catch(g){console.error("Sync failed:",g),alert(`Sync failed: ${g.message}`)}finally{m(!1),y(0)}};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center bg-blue-900/20 p-4 rounded border border-blue-800/50",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-lg font-bold text-blue-400 flex items-center gap-2",children:[l.jsx(M,{name:"database"})," Database View"]}),l.jsxs("p",{className:"text-xs text-blue-300/70",children:["Viewing ",e.length," approved questions from Google Sheets (Read Only)"]})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-4 bg-slate-900/50 p-1.5 rounded border border-slate-700",children:[l.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:"Sort By:"}),l.jsxs("select",{value:b,onChange:v=>P(v.target.value),className:"bg-slate-800 text-slate-200 text-xs border border-slate-600 rounded px-2 py-1 outline-none focus:border-blue-500",children:[l.jsx("option",{value:"default",children:"Default (Sheet Order)"}),l.jsx("option",{value:"newest",children:"Newest First"}),l.jsx("option",{value:"oldest",children:"Oldest First"}),l.jsx("option",{value:"language",children:"Language (A-Z)"}),l.jsx("option",{value:"discipline",children:"Discipline (A-Z)"}),l.jsx("option",{value:"difficulty",children:"Difficulty (Easy-Hard)"})]})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:r,disabled:d,className:"px-3 py-1 bg-indigo-800 hover:bg-indigo-700 text-indigo-200 text-xs rounded border border-indigo-600 flex items-center gap-2",children:[l.jsx(M,{name:"cloud-lightning",size:12,className:d?"animate-pulse":""})," Load Firestore"]}),l.jsxs("button",{onClick:a,disabled:d,className:"px-3 py-1 bg-blue-800 hover:bg-blue-700 text-blue-200 text-xs rounded border border-blue-600 flex items-center gap-2",children:[l.jsx(M,{name:"refresh-cw",size:12,className:d?"animate-spin":""})," Load Sheets"]}),l.jsxs("div",{className:"relative",ref:A,children:[l.jsxs("button",{onClick:()=>h(!E),className:"px-3 py-1 bg-slate-700 hover:bg-slate-600 text-slate-200 text-xs rounded border border-slate-600 flex items-center gap-2",children:[l.jsx(M,{name:"settings",size:12}),"Options",l.jsx(M,{name:"chevron-down",size:10,className:`transition-transform ${E?"rotate-180":""}`})]}),E&&l.jsx("div",{className:"absolute right-0 top-full mt-1 w-56 bg-slate-800 border border-slate-700 rounded-lg shadow-xl z-50 overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:l.jsxs("div",{className:"py-1",children:[l.jsx("button",{onClick:()=>{I(),h(!1)},disabled:p||e.length===0,className:"w-full text-left px-4 py-2 text-xs text-orange-300 hover:bg-slate-700 flex items-center gap-2 disabled:opacity-50",children:p?l.jsxs(l.Fragment,{children:[l.jsx(M,{name:"loader",size:14,className:"animate-spin"})," Syncing ",f,"%"]}):l.jsxs(l.Fragment,{children:[l.jsx(M,{name:"upload-cloud",size:14})," Sync to Firestore"]})}),l.jsx("div",{className:"border-t border-slate-700 my-1"}),l.jsxs("button",{onClick:()=>{n(),h(!1)},className:"w-full text-left px-4 py-2 text-xs text-red-300 hover:bg-slate-700 flex items-center gap-2",children:[l.jsx(M,{name:"trash-2",size:14})," Clear View"]}),l.jsxs("button",{onClick:()=>{D(),h(!1)},className:"w-full text-left px-4 py-2 text-xs text-red-400 hover:bg-red-900/30 flex items-center gap-2 font-bold",children:[l.jsx(M,{name:"alert-triangle",size:14})," HARD RESET (Danger!)"]})]})})]})]})]}),l.jsx(Ln,{questions:e}),O.length===0?l.jsx("div",{className:"text-center py-10 text-slate-500",children:"No questions loaded from database. Click Refresh."}):O.map((v,g)=>l.jsx("div",{"data-question-index":g,className:"opacity-75 hover:opacity-100 transition-all",children:l.jsx(bt,{q:v,onUpdateStatus:()=>{},onExplain:()=>{},onVariate:()=>{},onCritique:()=>{},onTranslateSingle:()=>{},onSwitchLanguage:j=>w(v,j),onDelete:()=>{},onUpdateQuestion:s,onKickBack:c,availableLanguages:N.get(v.uniqueId),isProcessing:!1,appMode:"database",showMessage:u})},g))]})};export{_n as default};

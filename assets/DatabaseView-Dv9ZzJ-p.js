import{H as z,J as te,K as ae,L as ie,M as ge,N as be,O as je,U as Y,r as l,V as Ne,a as re,W as Ae,Z as ne,_ as Ie,$ as Pe,a0 as we,a1 as se,a2 as De,a3 as Ce,a4 as Ee,a5 as Se,u as ke,b as Le,a6 as Te,a7 as Oe,a8 as _e,a9 as Re,aa as Me,ab as $e,ac as Ke,ad as le,ae as X,af as Z,ag as Fe,ah as Be,ai as _,aj as We,ak as Qe,al as ze,am as Ve,an as Ge,ao as He,ap as Ue,aq as Ye,C as Xe,j as r,x as $,P as Ze,y as Je,z as J,T as K,B as qe,A as B,X as W,Y as Q,D as et,E as tt,F as at,v as it,I as oe,Q as rt}from"./index-DYBO5kva.js";import{L as nt}from"./Legend-DzWgPM7o.js";var de=(e,t,i,a)=>ae(e,"xAxis",t,a),ce=(e,t,i,a)=>ie(e,"xAxis",t,a),ue=(e,t,i,a)=>ae(e,"yAxis",i,a),pe=(e,t,i,a)=>ie(e,"yAxis",i,a),st=z([te,de,ue,ce,pe],(e,t,i,a,s)=>je(e,"xAxis")?Y(t,a,!1):Y(i,s,!1)),lt=(e,t,i,a,s)=>s;function ot(e){return e.type==="line"}var dt=z([be,lt],(e,t)=>e.filter(ot).find(i=>i.id===t)),ct=z([te,de,ue,ce,pe,dt,st,ge],(e,t,i,a,s,n,o,c)=>{var{chartData:u,dataStartIndex:p,dataEndIndex:v}=c;if(!(n==null||t==null||i==null||a==null||s==null||a.length===0||s.length===0||o==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:f,data:x}=n,b;if(x!=null&&x.length>0?b=x:b=u?.slice(p,v+1),b!=null)return St({layout:e,xAxis:t,yAxis:i,xAxisTicks:a,yAxisTicks:s,dataKey:f,bandSize:o,displayedData:b})}}),ut=["id"],pt=["type","layout","connectNulls","needClip","shape"],ft=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function R(){return R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},R.apply(null,arguments)}function q(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),i.push.apply(i,a)}return i}function C(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?q(Object(i),!0).forEach(function(a){ht(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):q(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function ht(e,t,i){return(t=mt(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function mt(e){var t=xt(e,"string");return typeof t=="symbol"?t:t+""}function xt(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function V(e,t){if(e==null)return{};var i,a,s=vt(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)i=n[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(s[i]=e[i])}return s}function vt(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}var yt=e=>{var{dataKey:t,name:i,stroke:a,legendType:s,hide:n}=e;return[{inactive:n,dataKey:t,type:s,color:a,value:se(i,t),payload:e}]},gt=l.memo(e=>{var{dataKey:t,data:i,stroke:a,strokeWidth:s,fill:n,name:o,hide:c,unit:u,tooltipType:p}=e,v={dataDefinedOnItem:i,positions:void 0,settings:{stroke:a,strokeWidth:s,fill:n,dataKey:t,nameKey:void 0,name:se(o,t),hide:c,type:p,color:a,unit:u}};return l.createElement(De,{tooltipEntrySettings:v})}),fe=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function bt(e,t){for(var i=e.length%2!==0?[...e,0]:e,a=[],s=0;s<t;++s)a=[...a,...i];return a}var jt=(e,t,i)=>{var a=i.reduce((f,x)=>f+x);if(!a)return fe(t,e);for(var s=Math.floor(e/a),n=e%a,o=t-e,c=[],u=0,p=0;u<i.length;p+=i[u],++u)if(p+i[u]>n){c=[...i.slice(0,u),n-p];break}var v=c.length%2===0?[0,o]:[o];return[...bt(i,s),...c,...v].map(f=>"".concat(f,"px")).join(", ")};function Nt(e){var{clipPathId:t,points:i,props:a}=e,{dot:s,dataKey:n,needClip:o}=a,{id:c}=a,u=V(a,ut),p=Ge(u);return l.createElement(He,{points:i,dot:s,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:n,baseProps:p,needClip:o,clipPathId:t})}function At(e){var{showLabels:t,children:i,points:a}=e,s=l.useMemo(()=>a?.map(n=>{var o,c,u={x:(o=n.x)!==null&&o!==void 0?o:0,y:(c=n.y)!==null&&c!==void 0?c:0,width:0,lowerWidth:0,upperWidth:0,height:0};return C(C({},u),{},{value:n.value,payload:n.payload,viewBox:u,parentViewBox:void 0,fill:void 0})}),[a]);return l.createElement(Qe,{value:t?s:void 0},i)}function ee(e){var{clipPathId:t,pathRef:i,points:a,strokeDasharray:s,props:n}=e,{type:o,layout:c,connectNulls:u,needClip:p,shape:v}=n,f=V(n,pt),x=C(C({},ze(f)),{},{fill:"none",className:"recharts-line-curve",clipPath:p?"url(#clipPath-".concat(t,")"):void 0,points:a,type:o,layout:c,connectNulls:u,strokeDasharray:s??n.strokeDasharray});return l.createElement(l.Fragment,null,a?.length>1&&l.createElement(Ve,R({shapeType:"curve",option:v},x,{pathRef:i})),l.createElement(Nt,{points:a,clipPathId:t,props:n}))}function It(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function Pt(e){var{clipPathId:t,props:i,pathRef:a,previousPointsRef:s,longestAnimatedLengthRef:n}=e,{points:o,strokeDasharray:c,isAnimationActive:u,animationBegin:p,animationDuration:v,animationEasing:f,animateNewValues:x,width:b,height:I,onAnimationEnd:j,onAnimationStart:S}=i,E=s.current,A=Fe(o,"recharts-line-"),N=l.useRef(A),[D,k]=l.useState(!1),L=!D,T=l.useCallback(()=>{typeof j=="function"&&j(),k(!1)},[j]),h=l.useCallback(()=>{typeof S=="function"&&S(),k(!0)},[S]),d=It(a.current),m=l.useRef(0);N.current!==A&&(m.current=n.current,N.current=A);var y=m.current;return l.createElement(At,{points:o,showLabels:L},i.children,l.createElement(Be,{animationId:A,begin:p,duration:v,isActive:u,easing:f,onAnimationEnd:T,onAnimationStart:h,key:A},g=>{var P=_(y,d+y,g),F=Math.min(P,d),O;if(u)if(c){var xe="".concat(c).split(/[,\s]+/gim).map(w=>parseFloat(w));O=jt(F,d,xe)}else O=fe(d,F);else O=c==null?void 0:String(c);if(g>0&&d>0&&(s.current=o,n.current=Math.max(n.current,F)),E){var ve=E.length/o.length,G=g===1?o:o.map((w,ye)=>{var H=Math.floor(ye*ve);if(E[H]){var U=E[H];return C(C({},w),{},{x:_(U.x,w.x,g),y:_(U.y,w.y,g)})}return x?C(C({},w),{},{x:_(b*2,w.x,g),y:_(I/2,w.y,g)}):C(C({},w),{},{x:w.x,y:w.y})});return s.current=G,l.createElement(ee,{props:i,points:G,clipPathId:t,pathRef:a,strokeDasharray:O})}return l.createElement(ee,{props:i,points:o,clipPathId:t,pathRef:a,strokeDasharray:O})}),l.createElement(We,{label:i.label}))}function wt(e){var{clipPathId:t,props:i}=e,a=l.useRef(null),s=l.useRef(0),n=l.useRef(null);return l.createElement(Pt,{props:i,clipPathId:t,previousPointsRef:a,longestAnimatedLengthRef:s,pathRef:n})}var Dt=(e,t)=>{var i,a;return{x:(i=e.x)!==null&&i!==void 0?i:void 0,y:(a=e.y)!==null&&a!==void 0?a:void 0,value:e.value,errorVal:le(e.payload,t)}};class Ct extends l.Component{render(){var{hide:t,dot:i,points:a,className:s,xAxisId:n,yAxisId:o,top:c,left:u,width:p,height:v,id:f,needClip:x,zIndex:b}=this.props;if(t)return null;var I=Le("recharts-line",s),j=f,{r:S,strokeWidth:E}=Te(i),A=Oe(i),N=S*2+E,D=x?"url(#clipPath-".concat(A?"":"dots-").concat(j,")"):void 0;return l.createElement(_e,{zIndex:b},l.createElement(Re,{className:I},x&&l.createElement("defs",null,l.createElement(Me,{clipPathId:j,xAxisId:n,yAxisId:o}),!A&&l.createElement("clipPath",{id:"clipPath-dots-".concat(j)},l.createElement("rect",{x:u-N/2,y:c-N/2,width:p+N,height:v+N}))),l.createElement($e,{xAxisId:n,yAxisId:o,data:a,dataPointFormatter:Dt,errorBarOffset:0},l.createElement(wt,{props:this.props,clipPathId:j}))),l.createElement(Ke,{activeDot:this.props.activeDot,points:a,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:D}))}}var he={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:Ae.line,type:"linear"};function Et(e){var t=re(e,he),{activeDot:i,animateNewValues:a,animationBegin:s,animationDuration:n,animationEasing:o,connectNulls:c,dot:u,hide:p,isAnimationActive:v,label:f,legendType:x,xAxisId:b,yAxisId:I,id:j}=t,S=V(t,ft),{needClip:E}=Ce(b,I),A=Ee(),N=Se(),D=ne(),k=ke(m=>ct(m,b,I,D,j));if(N!=="horizontal"&&N!=="vertical"||k==null||A==null)return null;var{height:L,width:T,x:h,y:d}=A;return l.createElement(Ct,R({},S,{id:j,connectNulls:c,dot:u,activeDot:i,animateNewValues:a,animationBegin:s,animationDuration:n,animationEasing:o,isAnimationActive:v,hide:p,label:f,legendType:x,xAxisId:b,yAxisId:I,points:k,layout:N,height:L,width:T,left:h,top:d,needClip:E}))}function St(e){var{layout:t,xAxis:i,yAxis:a,xAxisTicks:s,yAxisTicks:n,dataKey:o,bandSize:c,displayedData:u}=e;return u.map((p,v)=>{var f=le(p,o);if(t==="horizontal"){var x=X({axis:i,ticks:s,bandSize:c,entry:p,index:v}),b=Z(f)?null:a.scale(f);return{x,y:b,value:f,payload:p}}var I=Z(f)?null:i.scale(f),j=X({axis:a,ticks:n,bandSize:c,entry:p,index:v});return I==null||j==null?null:{x:I,y:j,value:f,payload:p}}).filter(Boolean)}function kt(e){var t=re(e,he),i=ne();return l.createElement(Ie,{id:t.id,type:"line"},a=>l.createElement(l.Fragment,null,l.createElement(Pe,{legendPayload:yt(t)}),l.createElement(gt,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),l.createElement(we,{type:"line",id:a,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:i}),l.createElement(Et,R({},t,{id:a}))))}var me=l.memo(kt,Ne);me.displayName="Line";var Lt=["axis"],Tt=l.forwardRef((e,t)=>l.createElement(Ue,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Lt,tooltipPayloadSearcher:Ye,categoricalChartProps:e,ref:t}));const Ot=e=>{if(!e||e.length===0)return{total:0,byDifficulty:{Easy:0,Medium:0,Hard:0},byType:{"Multiple Choice":0,"True/False":0},byDiscipline:{},avgQuality:0};const t={total:e.length,byDifficulty:{Easy:0,Medium:0,Hard:0},byType:{"Multiple Choice":0,"True/False":0},byDiscipline:{},totalQuality:0,ratedCount:0};return e.forEach(i=>{t.byDifficulty[i.difficulty]!==void 0&&t.byDifficulty[i.difficulty]++,t.byType[i.type]!==void 0&&t.byType[i.type]++,t.byDiscipline[i.discipline]||(t.byDiscipline[i.discipline]=0),t.byDiscipline[i.discipline]++;const a=parseFloat(i.critiqueScore||i.initialQuality);isNaN(a)||(t.totalQuality+=a,t.ratedCount++)}),t.avgQuality=t.ratedCount>0?(t.totalQuality/t.ratedCount).toFixed(1):0,t},M=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8","#82ca9d"],_t=({questions:e})=>{const t=Xe.map(s=>({name:s,value:e.filter(n=>n.difficulty===s).length})).filter(s=>s.value>0),i=e.reduce((s,n)=>(s[n.discipline]=(s[n.discipline]||0)+1,s),{}),a=Object.entries(i).map(([s,n])=>({name:s,value:n})).sort((s,n)=>n.value-s.value);return r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700",children:[r.jsx("h3",{className:"text-sm font-bold text-slate-300 mb-4 text-center",children:"Difficulty Distribution"}),r.jsx("div",{className:"h-64",children:r.jsx($,{width:"100%",height:"100%",children:r.jsxs(Ze,{children:[r.jsx(Je,{data:t,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",label:({name:s,percent:n})=>`${s} ${(n*100).toFixed(0)}%`,children:t.map((s,n)=>r.jsx(J,{fill:M[n%M.length]},`cell-${n}`))}),r.jsx(K,{contentStyle:{backgroundColor:"#1e293b",borderColor:"#334155",color:"#f1f5f9"},itemStyle:{color:"#f1f5f9"}})]})})})]}),r.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700",children:[r.jsx("h3",{className:"text-sm font-bold text-slate-300 mb-4 text-center",children:"Questions by Discipline"}),r.jsx("div",{className:"h-64",children:r.jsx($,{width:"100%",height:"100%",children:r.jsxs(qe,{data:a,layout:"vertical",margin:{top:5,right:30,left:40,bottom:5},children:[r.jsx(B,{strokeDasharray:"3 3",stroke:"#334155",horizontal:!1}),r.jsx(W,{type:"number",stroke:"#94a3b8"}),r.jsx(Q,{type:"category",dataKey:"name",stroke:"#94a3b8",width:100,tick:{fontSize:10}}),r.jsx(K,{cursor:{fill:"#334155",opacity:.4},contentStyle:{backgroundColor:"#1e293b",borderColor:"#334155",color:"#f1f5f9"}}),r.jsx(et,{dataKey:"value",fill:"#82ca9d",radius:[0,4,4,0],children:a.map((s,n)=>r.jsx(J,{fill:M[n%M.length]},`cell-${n}`))})]})})})]})]})},Rt=({generations:e})=>{const i=[...e].sort((a,s)=>new Date(a.timestamp)-new Date(s.timestamp)).map((a,s)=>({name:`Batch ${s+1}`,date:new Date(a.timestamp).toLocaleDateString(),quality:a.averageQuality||0,cost:(a.estimatedCost||0)*100,tokens:(a.tokensUsed?.input||0)+(a.tokensUsed?.output||0)}));return i.length===0?r.jsx("div",{className:"text-center p-8 text-slate-500",children:"Not enough data to show trends. Generate some questions first!"}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700",children:[r.jsx("h3",{className:"text-sm font-bold text-slate-300 mb-4 text-center",children:"Average Quality Score Trend"}),r.jsx("div",{className:"h-64",children:r.jsx($,{width:"100%",height:"100%",children:r.jsxs(Tt,{data:i,margin:{top:5,right:30,left:20,bottom:5},children:[r.jsx(B,{strokeDasharray:"3 3",stroke:"#334155"}),r.jsx(W,{dataKey:"name",stroke:"#94a3b8",tick:{fontSize:10}}),r.jsx(Q,{stroke:"#94a3b8",domain:[0,100]}),r.jsx(K,{contentStyle:{backgroundColor:"#1e293b",borderColor:"#334155",color:"#f1f5f9"},labelStyle:{color:"#94a3b8"}}),r.jsx(nt,{}),r.jsx(me,{type:"monotone",dataKey:"quality",stroke:"#8884d8",activeDot:{r:8},name:"Avg Quality Score"})]})})})]}),r.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700",children:[r.jsx("h3",{className:"text-sm font-bold text-slate-300 mb-4 text-center",children:"Token Usage & Cost Trend"}),r.jsx("div",{className:"h-64",children:r.jsx($,{width:"100%",height:"100%",children:r.jsxs(tt,{data:i,margin:{top:10,right:30,left:0,bottom:0},children:[r.jsx("defs",{children:r.jsxs("linearGradient",{id:"colorTokens",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),r.jsx("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0})]})}),r.jsx(W,{dataKey:"name",stroke:"#94a3b8",tick:{fontSize:10}}),r.jsx(Q,{stroke:"#94a3b8"}),r.jsx(B,{strokeDasharray:"3 3",stroke:"#334155"}),r.jsx(K,{contentStyle:{backgroundColor:"#1e293b",borderColor:"#334155",color:"#f1f5f9"},labelStyle:{color:"#94a3b8"}}),r.jsx(at,{type:"monotone",dataKey:"tokens",stroke:"#82ca9d",fillOpacity:1,fill:"url(#colorTokens)",name:"Total Tokens"})]})})}),r.jsx("p",{className:"text-[10px] text-slate-500 text-center mt-2",children:"* Cost is correlated with token usage."})]})]})},Mt=({questions:e})=>{const[t,i]=l.useState("overview"),[a,s]=l.useState({generations:[]}),n=l.useMemo(()=>Ot(e),[e]);return l.useEffect(()=>{const o=it();s(o)},[e]),!e||e.length===0?null:r.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-lg p-4 mb-4 animate-in fade-in slide-in-from-top-2",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider flex items-center gap-2",children:[r.jsx(oe,{name:"bar-chart-2",size:14})," Database Metrics"]}),r.jsxs("div",{className:"flex bg-slate-800 rounded-lg p-1 gap-1",children:[r.jsx("button",{onClick:()=>i("overview"),className:`px-3 py-1 text-[10px] font-bold uppercase rounded transition-colors ${t==="overview"?"bg-indigo-600 text-white":"text-slate-400 hover:text-slate-200"}`,children:"Overview"}),r.jsx("button",{onClick:()=>i("distributions"),className:`px-3 py-1 text-[10px] font-bold uppercase rounded transition-colors ${t==="distributions"?"bg-indigo-600 text-white":"text-slate-400 hover:text-slate-200"}`,children:"Distributions"}),r.jsx("button",{onClick:()=>i("trends"),className:`px-3 py-1 text-[10px] font-bold uppercase rounded transition-colors ${t==="trends"?"bg-indigo-600 text-white":"text-slate-400 hover:text-slate-200"}`,children:"Trends"})]})]}),r.jsxs("div",{className:"min-h-[200px]",children:[t==="overview"&&r.jsxs("div",{className:"animate-in fade-in duration-300",children:[r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[r.jsxs("div",{className:"bg-slate-800 p-3 rounded border border-slate-700",children:[r.jsx("div",{className:"text-2xl font-bold text-white",children:n.total}),r.jsx("div",{className:"text-[10px] text-slate-400 uppercase",children:"Total Questions"})]}),r.jsxs("div",{className:"bg-slate-800 p-3 rounded border border-slate-700",children:[r.jsx("div",{className:"text-2xl font-bold text-indigo-400",children:n.avgQuality}),r.jsx("div",{className:"text-[10px] text-slate-400 uppercase",children:"Avg Quality"})]}),r.jsxs("div",{className:"bg-slate-800 p-3 rounded border border-slate-700",children:[r.jsx("div",{className:"text-2xl font-bold text-emerald-400",children:n.byType["Multiple Choice"]}),r.jsx("div",{className:"text-[10px] text-slate-400 uppercase",children:"Multiple Choice"})]}),r.jsxs("div",{className:"bg-slate-800 p-3 rounded border border-slate-700",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-400",children:n.byType["True/False"]}),r.jsx("div",{className:"text-[10px] text-slate-400 uppercase",children:"True/False"})]})]}),r.jsx("div",{className:"space-y-3",children:r.jsxs("div",{children:[r.jsx("div",{className:"flex justify-between text-[10px] text-slate-400 mb-1 uppercase font-bold",children:r.jsx("span",{children:"Difficulty Distribution"})}),r.jsxs("div",{className:"flex h-2 rounded-full overflow-hidden bg-slate-800",children:[r.jsx("div",{className:"bg-green-500",style:{width:`${n.byDifficulty.Easy/n.total*100}%`},title:`Easy: ${n.byDifficulty.Easy}`}),r.jsx("div",{className:"bg-yellow-500",style:{width:`${n.byDifficulty.Medium/n.total*100}%`},title:`Medium: ${n.byDifficulty.Medium}`}),r.jsx("div",{className:"bg-red-500",style:{width:`${n.byDifficulty.Hard/n.total*100}%`},title:`Hard: ${n.byDifficulty.Hard}`})]}),r.jsxs("div",{className:"flex justify-between text-[10px] text-slate-500 mt-1",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"})," Easy"]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500"})," Medium"]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"})," Hard"]})]})]})})]}),t==="distributions"&&r.jsx("div",{className:"animate-in fade-in duration-300",children:r.jsx(_t,{questions:e})}),t==="trends"&&r.jsx("div",{className:"animate-in fade-in duration-300",children:r.jsx(Rt,{generations:a.generations})})]})]})},Ft=({questions:e,_sheetUrl:t,_onLoad:i,_onLoadFirestore:a,_onClearView:s,_onHardReset:n,onUpdateQuestion:o,onKickBack:c,_isProcessing:u,showMessage:p,filterMode:v="all",sortBy:f="default",onStartTutorial:x})=>{const[b,I]=l.useState(!1),[j,S]=l.useState(0),[E,A]=l.useState(!1),N=l.useRef(null);l.useEffect(()=>{!localStorage.getItem("ue5_tutorial_database_completed")&&x&&setTimeout(()=>x("database"),500)},[]),l.useEffect(()=>{const h=d=>{N.current&&!N.current.contains(d.target)&&A(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const D=l.useMemo(()=>{if(!e)return[];const d=[...e];switch(f){case"newest":return d.sort((m,y)=>{const g=m.createdAt||m.id||0;return(y.createdAt||y.id||0)-g});case"oldest":return d.sort((m,y)=>{const g=m.createdAt||m.id||0,P=y.createdAt||y.id||0;return g-P});case"language":return d.sort((m,y)=>(m.language||"English").localeCompare(y.language||"English"));case"discipline":return d.sort((m,y)=>(m.discipline||"").localeCompare(y.discipline||""));case"difficulty":{const m={Easy:1,Medium:2,Hard:3};return d.sort((y,g)=>(m[y.difficulty]||0)-(m[g.difficulty]||0))}case"default":default:return d}},[e,f,v]),k=l.useMemo(()=>{if(!e)return new Map;const h=new Map;return e.forEach(d=>{d.uniqueId&&(h.has(d.uniqueId)||h.set(d.uniqueId,new Set),h.get(d.uniqueId).add(d.language||"English"))}),h},[e]),L=l.useMemo(()=>{if(!e)return new Map;const h=new Map;return e.forEach(d=>{if(!d.uniqueId)return;const m=`${d.uniqueId}::${d.language||"English"}`;h.set(m,d)}),h},[e]),T=(h,d)=>{if(!h.uniqueId){p("Cannot switch: Question has no unique ID for linking translations.");return}const m=`${h.uniqueId}::${d}`,y=L.get(m);if(y){const g=D.findIndex(P=>P.id===y.id);if(g!==-1){const P=document.querySelector(`[data-question-index="${g}"]`);P&&(P.scrollIntoView({behavior:"smooth",block:"center"}),P.classList.add("ring-2","ring-green-500"),setTimeout(()=>P.classList.remove("ring-2","ring-green-500"),2e3)),p(`Scrolled to ${d} version.`)}}else p(`${d} version not found in current view. Try using "Sort by Language" to find it.`)};return r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"flex justify-between items-center bg-blue-900/20 p-4 rounded border border-blue-800/50","data-tour":"database-search",children:r.jsx("div",{className:"flex items-center gap-4","data-tour":"database-actions",children:r.jsxs("div",{children:[r.jsxs("h2",{className:"text-lg font-bold text-blue-400 flex items-center gap-2",children:[r.jsx(oe,{name:"database"})," Database View"]}),r.jsxs("p",{className:"text-xs text-blue-300/70",children:["Viewing ",D.length," of ",e.length," loaded records"]})]})})}),r.jsx(Mt,{questions:e}),r.jsx("div",{"data-tour":"database-grid",children:D.length===0?r.jsx("div",{className:"text-center py-10 text-slate-500",children:"No questions loaded from database. Click Refresh."}):D.map((h,d)=>r.jsx("div",{"data-question-index":d,className:"opacity-75 hover:opacity-100 transition-all",children:r.jsx(rt,{q:h,onUpdateStatus:()=>{},onExplain:()=>{},onVariate:()=>{},onCritique:()=>{},onTranslateSingle:()=>{},onSwitchLanguage:m=>T(h,m),onDelete:()=>{},onUpdateQuestion:o,onKickBack:c,availableLanguages:k.get(h.uniqueId),isProcessing:!1,appMode:"database",showMessage:p})},d))})]})};export{Ft as default};
